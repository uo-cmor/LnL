<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ross Wilson">
<meta name="dcterms.date" content="2023-03-08">

<title>CMOR Lunch’n’Learn - Introduction to R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/cmor-logo.jpg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Centre for Musculoskeletal Outcomes Research<br><i>University of Otago</i></span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../presentations/Intro-to-R.html">Presentations</a></li><li class="breadcrumb-item"><a href="../presentations/Intro-to-R.html">Introduction to R</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Presentations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/Intro-to-R.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Introduction to R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/osf.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Open science</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../presentations/meta-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Meta-analysis</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link active" data-scroll-target="#getting-started">Getting Started</a>
  <ul class="collapse">
  <li><a href="#what-is-r-what-is-rstudio" id="toc-what-is-r-what-is-rstudio" class="nav-link" data-scroll-target="#what-is-r-what-is-rstudio">What is R? What is RStudio?</a></li>
  <li><a href="#why-learn-r" id="toc-why-learn-r" class="nav-link" data-scroll-target="#why-learn-r">Why learn R?</a></li>
  <li><a href="#getting-set-up" id="toc-getting-set-up" class="nav-link" data-scroll-target="#getting-set-up">Getting set up</a></li>
  <li><a href="#getting-to-know-rstudio" id="toc-getting-to-know-rstudio" class="nav-link" data-scroll-target="#getting-to-know-rstudio">Getting to know RStudio</a></li>
  <li><a href="#starting-with-r" id="toc-starting-with-r" class="nav-link" data-scroll-target="#starting-with-r">Starting with R</a></li>
  <li><a href="#starting-with-r-1" id="toc-starting-with-r-1" class="nav-link" data-scroll-target="#starting-with-r-1">Starting with R</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a></li>
  <li><a href="#functions-1" id="toc-functions-1" class="nav-link" data-scroll-target="#functions-1">Functions</a></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types">Data types</a></li>
  <li><a href="#data-types-1" id="toc-data-types-1" class="nav-link" data-scroll-target="#data-types-1">Data types</a></li>
  <li><a href="#subsetting" id="toc-subsetting" class="nav-link" data-scroll-target="#subsetting">Subsetting</a></li>
  </ul></li>
  <li><a href="#working-with-data-frames" id="toc-working-with-data-frames" class="nav-link" data-scroll-target="#working-with-data-frames">Working with Data Frames</a>
  <ul class="collapse">
  <li><a href="#data-frames" id="toc-data-frames" class="nav-link" data-scroll-target="#data-frames">Data frames</a></li>
  <li><a href="#the-tidyverse" id="toc-the-tidyverse" class="nav-link" data-scroll-target="#the-tidyverse">The <code>tidyverse</code></a></li>
  <li><a href="#data-frames-1" id="toc-data-frames-1" class="nav-link" data-scroll-target="#data-frames-1">Data frames</a></li>
  <li><a href="#manipulating-data-frames-with-dplyr" id="toc-manipulating-data-frames-with-dplyr" class="nav-link" data-scroll-target="#manipulating-data-frames-with-dplyr">Manipulating data frames with <code>dplyr</code></a></li>
  <li><a href="#manipulating-data-frames-with-dplyr-1" id="toc-manipulating-data-frames-with-dplyr-1" class="nav-link" data-scroll-target="#manipulating-data-frames-with-dplyr-1">Manipulating data frames with <code>dplyr</code></a></li>
  <li><a href="#manipulating-data-frames-with-dplyr-2" id="toc-manipulating-data-frames-with-dplyr-2" class="nav-link" data-scroll-target="#manipulating-data-frames-with-dplyr-2">Manipulating data frames with <code>dplyr</code></a></li>
  <li><a href="#manipulating-data-frames-with-dplyr-3" id="toc-manipulating-data-frames-with-dplyr-3" class="nav-link" data-scroll-target="#manipulating-data-frames-with-dplyr-3">Manipulating data frames with <code>dplyr</code></a></li>
  <li><a href="#manipulating-data-frames-with-dplyr-4" id="toc-manipulating-data-frames-with-dplyr-4" class="nav-link" data-scroll-target="#manipulating-data-frames-with-dplyr-4">Manipulating data frames with <code>dplyr</code></a></li>
  <li><a href="#reshaping-data-frames" id="toc-reshaping-data-frames" class="nav-link" data-scroll-target="#reshaping-data-frames">Reshaping data frames</a></li>
  <li><a href="#reshaping-data-frames-1" id="toc-reshaping-data-frames-1" class="nav-link" data-scroll-target="#reshaping-data-frames-1">Reshaping data frames</a></li>
  <li><a href="#reshaping-data-frames-2" id="toc-reshaping-data-frames-2" class="nav-link" data-scroll-target="#reshaping-data-frames-2">Reshaping data frames</a></li>
  <li><a href="#reshaping-data-frames-3" id="toc-reshaping-data-frames-3" class="nav-link" data-scroll-target="#reshaping-data-frames-3">Reshaping data frames</a></li>
  <li><a href="#other-tidyverse-packages" id="toc-other-tidyverse-packages" class="nav-link" data-scroll-target="#other-tidyverse-packages">Other <code>tidyverse</code> packages</a></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources">Resources</a></li>
  </ul></li>
  <li><a href="#data-analysis-in-r-regression" id="toc-data-analysis-in-r-regression" class="nav-link" data-scroll-target="#data-analysis-in-r-regression">Data analysis in R (regression)</a>
  <ul class="collapse">
  <li><a href="#everything-in-r-is-an-object" id="toc-everything-in-r-is-an-object" class="nav-link" data-scroll-target="#everything-in-r-is-an-object">Everything in R is an object</a></li>
  <li><a href="#fitted-model-objects" id="toc-fitted-model-objects" class="nav-link" data-scroll-target="#fitted-model-objects">Fitted model objects</a></li>
  <li><a href="#fitted-model-objects-1" id="toc-fitted-model-objects-1" class="nav-link" data-scroll-target="#fitted-model-objects-1">Fitted model objects</a></li>
  <li><a href="#the-broom-package" id="toc-the-broom-package" class="nav-link" data-scroll-target="#the-broom-package">The <code>broom</code> package</a></li>
  <li><a href="#first-example-linear-regression" id="toc-first-example-linear-regression" class="nav-link" data-scroll-target="#first-example-linear-regression">First example – linear regression</a></li>
  <li><a href="#first-example-linear-regression-1" id="toc-first-example-linear-regression-1" class="nav-link" data-scroll-target="#first-example-linear-regression-1">First example – linear regression</a></li>
  <li><a href="#first-example-linear-regression-2" id="toc-first-example-linear-regression-2" class="nav-link" data-scroll-target="#first-example-linear-regression-2">First example – linear regression</a></li>
  <li><a href="#first-example-linear-regression-3" id="toc-first-example-linear-regression-3" class="nav-link" data-scroll-target="#first-example-linear-regression-3">First example – linear regression</a></li>
  <li><a href="#first-example-linear-regression-4" id="toc-first-example-linear-regression-4" class="nav-link" data-scroll-target="#first-example-linear-regression-4">First example – linear regression</a></li>
  <li><a href="#first-example-linear-regression-5" id="toc-first-example-linear-regression-5" class="nav-link" data-scroll-target="#first-example-linear-regression-5">First example – linear regression</a></li>
  <li><a href="#generalised-linear-regression" id="toc-generalised-linear-regression" class="nav-link" data-scroll-target="#generalised-linear-regression">Generalised linear regression</a></li>
  <li><a href="#generalised-linear-regression-1" id="toc-generalised-linear-regression-1" class="nav-link" data-scroll-target="#generalised-linear-regression-1">Generalised linear regression</a></li>
  <li><a href="#generalised-linear-regression-2" id="toc-generalised-linear-regression-2" class="nav-link" data-scroll-target="#generalised-linear-regression-2">Generalised linear regression</a></li>
  <li><a href="#what-else" id="toc-what-else" class="nav-link" data-scroll-target="#what-else">What else?</a></li>
  </ul></li>
  <li><a href="#data-visualisation" id="toc-data-visualisation" class="nav-link" data-scroll-target="#data-visualisation">Data visualisation</a>
  <ul class="collapse">
  <li><a href="#data-visualisation-with-ggplot2" id="toc-data-visualisation-with-ggplot2" class="nav-link" data-scroll-target="#data-visualisation-with-ggplot2">Data visualisation with <code>ggplot2</code></a></li>
  <li><a href="#the-grammar-of-graphics" id="toc-the-grammar-of-graphics" class="nav-link" data-scroll-target="#the-grammar-of-graphics">The grammar of graphics</a></li>
  <li><a href="#data-visualisation-with-ggplot2-1" id="toc-data-visualisation-with-ggplot2-1" class="nav-link" data-scroll-target="#data-visualisation-with-ggplot2-1">Data visualisation with <code>ggplot2</code></a></li>
  </ul></li>
  <li><a href="#data-analysis-workflows-and-project-organisation" id="toc-data-analysis-workflows-and-project-organisation" class="nav-link" data-scroll-target="#data-analysis-workflows-and-project-organisation">Data analysis workflows and project organisation</a>
  <ul class="collapse">
  <li><a href="#reproducible-research" id="toc-reproducible-research" class="nav-link" data-scroll-target="#reproducible-research">Reproducible research</a></li>
  <li><a href="#reproducible-research-1" id="toc-reproducible-research-1" class="nav-link" data-scroll-target="#reproducible-research-1">Reproducible research</a></li>
  <li><a href="#reproducible-research-2" id="toc-reproducible-research-2" class="nav-link" data-scroll-target="#reproducible-research-2">Reproducible research</a></li>
  <li><a href="#key-principles" id="toc-key-principles" class="nav-link" data-scroll-target="#key-principles">Key principles</a></li>
  <li><a href="#key-principles-raw-data" id="toc-key-principles-raw-data" class="nav-link" data-scroll-target="#key-principles-raw-data">Key principles – Raw data</a></li>
  <li><a href="#key-principles-raw-data-1" id="toc-key-principles-raw-data-1" class="nav-link" data-scroll-target="#key-principles-raw-data-1">Key principles – Raw data</a></li>
  <li><a href="#key-principles-raw-data-2" id="toc-key-principles-raw-data-2" class="nav-link" data-scroll-target="#key-principles-raw-data-2">Key principles – Raw data</a></li>
  <li><a href="#key-principles-1" id="toc-key-principles-1" class="nav-link" data-scroll-target="#key-principles-1">Key principles</a></li>
  <li><a href="#key-principles-2" id="toc-key-principles-2" class="nav-link" data-scroll-target="#key-principles-2">Key principles</a></li>
  <li><a href="#key-principles-source-files" id="toc-key-principles-source-files" class="nav-link" data-scroll-target="#key-principles-source-files">Key principles – Source files</a></li>
  <li><a href="#key-principles-source-files-1" id="toc-key-principles-source-files-1" class="nav-link" data-scroll-target="#key-principles-source-files-1">Key principles – Source files</a></li>
  <li><a href="#key-principles-source-files-2" id="toc-key-principles-source-files-2" class="nav-link" data-scroll-target="#key-principles-source-files-2">Key principles – Source files</a></li>
  <li><a href="#key-principles-source-files-3" id="toc-key-principles-source-files-3" class="nav-link" data-scroll-target="#key-principles-source-files-3">Key principles – Source files</a></li>
  <li><a href="#key-principles-source-files-4" id="toc-key-principles-source-files-4" class="nav-link" data-scroll-target="#key-principles-source-files-4">Key principles – Source files</a></li>
  <li><a href="#key-principles-3" id="toc-key-principles-3" class="nav-link" data-scroll-target="#key-principles-3">Key principles</a></li>
  <li><a href="#key-principles-4" id="toc-key-principles-4" class="nav-link" data-scroll-target="#key-principles-4">Key principles</a></li>
  <li><a href="#key-principles-design-for-collaboration" id="toc-key-principles-design-for-collaboration" class="nav-link" data-scroll-target="#key-principles-design-for-collaboration">Key principles – Design for collaboration</a></li>
  <li><a href="#key-principles-design-for-collaboration-1" id="toc-key-principles-design-for-collaboration-1" class="nav-link" data-scroll-target="#key-principles-design-for-collaboration-1">Key principles – Design for collaboration</a></li>
  <li><a href="#key-principles-design-for-collaboration-2" id="toc-key-principles-design-for-collaboration-2" class="nav-link" data-scroll-target="#key-principles-design-for-collaboration-2">Key principles – Design for collaboration</a></li>
  <li><a href="#key-principles-5" id="toc-key-principles-5" class="nav-link" data-scroll-target="#key-principles-5">Key principles</a></li>
  <li><a href="#key-principles-6" id="toc-key-principles-6" class="nav-link" data-scroll-target="#key-principles-6">Key principles</a></li>
  <li><a href="#key-principles-version-control" id="toc-key-principles-version-control" class="nav-link" data-scroll-target="#key-principles-version-control">Key principles – Version control</a></li>
  <li><a href="#key-principles-version-control-1" id="toc-key-principles-version-control-1" class="nav-link" data-scroll-target="#key-principles-version-control-1">Key principles – Version control</a></li>
  <li><a href="#key-principles-version-control-2" id="toc-key-principles-version-control-2" class="nav-link" data-scroll-target="#key-principles-version-control-2">Key principles – Version control</a></li>
  <li><a href="#key-principles-7" id="toc-key-principles-7" class="nav-link" data-scroll-target="#key-principles-7">Key principles</a></li>
  <li><a href="#key-principles-8" id="toc-key-principles-8" class="nav-link" data-scroll-target="#key-principles-8">Key principles</a></li>
  <li><a href="#key-principles-automation" id="toc-key-principles-automation" class="nav-link" data-scroll-target="#key-principles-automation">Key principles – Automation</a></li>
  <li><a href="#key-principles-automation-1" id="toc-key-principles-automation-1" class="nav-link" data-scroll-target="#key-principles-automation-1">Key principles – Automation</a></li>
  <li><a href="#key-principles-automation-2" id="toc-key-principles-automation-2" class="nav-link" data-scroll-target="#key-principles-automation-2">Key principles – Automation</a></li>
  <li><a href="#key-principles-automation-3" id="toc-key-principles-automation-3" class="nav-link" data-scroll-target="#key-principles-automation-3">Key principles – Automation</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  <li><a href="#summary-1" id="toc-summary-1" class="nav-link" data-scroll-target="#summary-1">Summary</a></li>
  <li><a href="#resources-1" id="toc-resources-1" class="nav-link" data-scroll-target="#resources-1">Resources</a></li>
  </ul></li>
  <li><a href="#writing-reports-in-r" id="toc-writing-reports-in-r" class="nav-link" data-scroll-target="#writing-reports-in-r">Writing reports in R</a>
  <ul class="collapse">
  <li><a href="#data-workflow" id="toc-data-workflow" class="nav-link" data-scroll-target="#data-workflow">Data workflow</a></li>
  <li><a href="#data-workflow-1" id="toc-data-workflow-1" class="nav-link" data-scroll-target="#data-workflow-1">Data workflow</a></li>
  <li><a href="#r-markdown" id="toc-r-markdown" class="nav-link" data-scroll-target="#r-markdown">R Markdown</a></li>
  <li><a href="#quarto" id="toc-quarto" class="nav-link" data-scroll-target="#quarto">Quarto</a></li>
  </ul></li>
  <li><a href="#version-control" id="toc-version-control" class="nav-link" data-scroll-target="#version-control">Version control</a></li>
  <li><a href="#automation" id="toc-automation" class="nav-link" data-scroll-target="#automation">Automation</a></li>
  <li><a href="#programming-in-r" id="toc-programming-in-r" class="nav-link" data-scroll-target="#programming-in-r">Programming in R</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Intro-to-R.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introduction to R</h1>
<p class="subtitle lead">CMOR Lunch’n’Learn</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Ross Wilson </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">8 March 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="getting-started" class="level1" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1 data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">Getting Started</h1>
<section id="what-is-r-what-is-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="what-is-r-what-is-rstudio">What is R? What is RStudio?</h2>
<ul>
<li>R is a <em>programming language</em> designed to undertake statistical analysis</li>
<li>RStudio is an Integrated Development Environment (IDE) for R
<ul>
<li>An IDE is a piece of software including a text editor and other tools to make programming (in this case programming in R, specifically) easier</li>
<li>You don’t need to use RStudio to use R, but it makes it <strong><em>a lot</em></strong> easier</li>
<li>To use RStudio, you also need R installed and working</li>
</ul></li>
</ul>
</section>
<section id="why-learn-r" class="level2">
<h2 class="anchored" data-anchor-id="why-learn-r">Why learn R?</h2>
<ul>
<li>Powerful and extensible
<ul>
<li>Pretty much any statistical analysis you want to do can be done in R</li>
<li>There are a huge number of freely-available user-written packages that provide all sorts of additional functionality</li>
</ul></li>
<li>Reproducibility
<ul>
<li>By writing R scripts (code) for your analyses, they can be easily checked/replicated/ updated/adapted, by yourself and others</li>
</ul></li>
<li>High-quality graphics
<ul>
<li>R has a lot of plotting functions to help you produce publication-quality figures</li>
</ul></li>
</ul>
</section>
<section id="getting-set-up" class="level2">
<h2 class="anchored" data-anchor-id="getting-set-up">Getting set up</h2>
<ul>
<li>Install R
<ul>
<li><a href="https://cloud.R-project.org/" class="uri">https://cloud.R-project.org/</a></li>
<li>Choose the appropriate version for your operating system and follow the instructions</li>
</ul></li>
<li>Install RStudio
<ul>
<li><a href="https://posit.co/download/rstudio-desktop/" class="uri">https://posit.co/download/rstudio-desktop/</a></li>
<li>ditto</li>
</ul></li>
</ul>
</section>
<section id="getting-to-know-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="getting-to-know-rstudio">Getting to know RStudio</h2>
<div class="absolute">
<p><img src="images/rstudio-screenshot.png" class="img-fluid"></p>
</div>
<div class="fragment">
<div class="absolute" data-top="155" data-left="0" width="609" height="161" style="border-style:solid; border-width:5px; border-color:red; background: rgba(255, 255, 255, 0.4);">

</div>
<div class="absolute" data-top="205" data-left="0" width="609" height="50" style="text-align:center; color:red; font-weight:bold;">
<p>Source</p>
</div>
</div>
<div class="fragment">
<div class="absolute" data-top="321" data-left="0" width="609" height="311" style="border-style:solid; border-width:5px; border-color:red; background: rgba(255, 255, 255, 0.4);">

</div>
<div class="absolute" data-top="425" data-left="0" width="609" style="text-align:center; color:red; font-weight:bold;">
<p>Console</p>
</div>
</div>
<div class="fragment">
<div class="absolute" data-top="155" data-left="614" width="373" height="180" style="border-style:solid; border-width:5px; border-color:red; background: rgba(255, 255, 255, 0.4);">

</div>
<div class="absolute" data-top="190" data-left="614" width="373" style="text-align:center; color:red; font-weight:bold;">
<p>Environment/<br>History</p>
</div>
</div>
<div class="fragment">
<div class="absolute" data-top="340" data-left="614" width="373" height="292" style="border-style:solid; border-width:5px; border-color:red; background: rgba(255, 255, 255, 0.4);">

</div>
<div class="absolute" data-top="405" data-left="614" width="373" style="text-align:center; color:red; font-weight:bold;">
<p>Files/Plots/<br>Packages/<br>Help/Viewer</p>
</div>
</div>
</section>
<section id="starting-with-r" class="level2">
<h2 class="anchored" data-anchor-id="starting-with-r">Starting with R</h2>
<p>. . .</p>
<ul>
<li>We can type math in the console, and get an answer:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span><span class="sc">+</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<p>. . .</p>
<ul>
<li>But to do anything useful, we need to assign the result to a name:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">5</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<p><img src="images/environment-pane.png" class="absolute fragment img-fluid" data-top="300" data-left="250"></p>
</section>
<section id="starting-with-r-1" class="level2">
<h2 class="anchored" data-anchor-id="starting-with-r-1">Starting with R</h2>
<p>. . .</p>
<ul>
<li>Then we can do things with them:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> x</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
</div>
<p><img src="images/environment-pane-2.png" class="absolute fragment img-fluid" data-top="115" data-left="250"></p>
<p>. . .</p>
<p><br></p>
<ul>
<li>But note that once the value is assigned to y, changing x will not update y:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">25</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
</div>
</section>
<section id="functions" class="level2">
<h2 class="anchored" data-anchor-id="functions">Functions</h2>
<ul>
<li>Functions allow us to run commands other than simple arithmetic</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
<ul>
<li>Functions consist of a set of input <em>arguments</em>, code that does something with those inputs, and a return <em>value</em></li>
</ul>
<p>. . .</p>
<ul>
<li>To get help on a function, look up the documentation</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>?sqrt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img src="images/function-documentation.png" class="absolute fragment img-fluid" data-top="10" data-left="500"></p>
</section>
<section id="functions-1" class="level2">
<h2 class="anchored" data-anchor-id="functions-1">Functions</h2>
<ul>
<li>You can (and should!) also write your own functions</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>times2 <span class="ot">&lt;-</span> <span class="cf">function</span>(a) {</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(a <span class="sc">*</span> <span class="dv">2</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">times2</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 50</code></pre>
</div>
</div>
<p>. . .</p>
<ul>
<li>Separating your code out into discrete functions makes it
<ul>
<li>shorter</li>
<li>easier to follow</li>
<li>less error prone</li>
</ul></li>
</ul>
</section>
<section id="data-types" class="level2">
<h2 class="anchored" data-anchor-id="data-types">Data types</h2>
<ul>
<li>So far we have only seen single numeric values</li>
<li>Data in R can take many forms
<ul>
<li>The most basic data structure is the <em>vector</em></li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">6</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  7 10  6</code></pre>
</div>
</div>
<p>. . .</p>
<ul>
<li>Vectors can also contain characters</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"banana"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"  "banana"</code></pre>
</div>
</div>
<div class="absolute fragment smaller" data-top="400" data-left="300" width="500" style="background:#ffffff; border-style:solid; border-width:medium; border-color:red; font-size:0.7em;">
<p><strong>The quotes are essential:</strong></p>
<p>otherwise R will look for the names ‘apple’ and ‘banana’ (if these names exist, it will use the values they refer to instead of the character strings; if they don’t, it will give an error)</p>
</div>
</section>
<section id="data-types-1" class="level2">
<h2 class="anchored" data-anchor-id="data-types-1">Data types</h2>
<ul>
<li>The basic data types are <code>numeric</code>, <code>character</code>, <code>logical</code> (<code>TRUE</code> and <code>FALSE</code> values only), and <code>integer</code>
<ul>
<li>Also <code>complex</code> and <code>raw</code>, but we don’t need to worry about those</li>
</ul></li>
<li>In addition to vectors, more complex data structures include:
<ul>
<li>lists: similar to vectors, but the elements can be anything (including other lists), and don’t need to all be the same</li>
<li>matrices and arrays: like vectors, but with multiple dimensions</li>
<li>data frames: more on these later</li>
</ul></li>
</ul>
</section>
<section id="subsetting" class="level2">
<h2 class="anchored" data-anchor-id="subsetting">Subsetting</h2>
<ul>
<li>We can extract values from within a vector (or other data structure) with square brackets</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">12</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>a[<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12  2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>a[<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 5</code></pre>
</div>
</div>
<ul>
<li>We can use this in conjunction with a logical operator to do conditional subsetting</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>a[a <span class="sc">&gt;</span> <span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5 12</code></pre>
</div>
</div>
</section>
</section>
<section id="working-with-data-frames" class="level1" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1 data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">Working with Data Frames</h1>
<section id="data-frames" class="level2">
<h2 class="anchored" data-anchor-id="data-frames">Data frames</h2>
<ul>
<li>A data frame is a tabular data structure (like a spreadsheet)
<ul>
<li>Each column is a variable</li>
<li>Each row is an observation</li>
</ul></li>
<li>Each column (variable) is a vector, so must contain a single data type
<ul>
<li>But different columns can have different types</li>
</ul></li>
<li>We can read data from Excel or CSV spreadsheets, data files from Stata etc, previously saved R data frames, and much else…</li>
</ul>
</section>
<section id="the-tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="the-tidyverse">The <code>tidyverse</code></h2>
<ul>
<li>The ‘<code>tidyverse</code>’ is a collection of packages created by the company that makes RStudio</li>
<li>It contains a lot of functions designed to make working with data frames easier
<ul>
<li><code>tibble</code>: a replacement for base data frames</li>
<li><code>readr</code>: read tabular data like csv files (also <code>readxl</code> for Excel files, <code>haven</code> for SPSS/Stata/SAS, and others for different file types)</li>
<li><code>dplyr</code>: data manipulation</li>
<li><code>tidyr</code>: reshaping and tidying data</li>
<li><code>ggplot2</code>: creating plots</li>
<li><code>purrr</code>: functional programming</li>
<li><code>stringr</code>: working with character strings</li>
<li><code>forcats</code>: working with factor variables</li>
</ul></li>
</ul>
</section>
<section id="data-frames-1" class="level2">
<h2 class="anchored" data-anchor-id="data-frames-1">Data frames</h2>
<ul>
<li>Reading in a data frame with <code>read_csv()</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"raw_data/gapminder_data.csv"</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>gapminder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 6
   country      year      pop continent lifeExp gdpPercap
   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan  1952  8425333 Asia         28.8      779.
 2 Afghanistan  1957  9240934 Asia         30.3      821.
 3 Afghanistan  1962 10267083 Asia         32.0      853.
 4 Afghanistan  1967 11537966 Asia         34.0      836.
 5 Afghanistan  1972 13079460 Asia         36.1      740.
 6 Afghanistan  1977 14880372 Asia         38.4      786.
 7 Afghanistan  1982 12881816 Asia         39.9      978.
 8 Afghanistan  1987 13867957 Asia         40.8      852.
 9 Afghanistan  1992 16317921 Asia         41.7      649.
10 Afghanistan  1997 22227415 Asia         41.8      635.
# ℹ 1,694 more rows</code></pre>
</div>
</div>
</section>
<section id="manipulating-data-frames-with-dplyr" class="level2">
<h2 class="anchored" data-anchor-id="manipulating-data-frames-with-dplyr">Manipulating data frames with <code>dplyr</code></h2>
<ul>
<li><code>select()</code> only a subset of variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(gapminder, year, country, gdpPercap)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 3
    year country     gdpPercap
   &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1  1952 Afghanistan      779.
 2  1957 Afghanistan      821.
 3  1962 Afghanistan      853.
 4  1967 Afghanistan      836.
 5  1972 Afghanistan      740.
 6  1977 Afghanistan      786.
 7  1982 Afghanistan      978.
 8  1987 Afghanistan      852.
 9  1992 Afghanistan      649.
10  1997 Afghanistan      635.
# ℹ 1,694 more rows</code></pre>
</div>
</div>
</section>
<section id="manipulating-data-frames-with-dplyr-1" class="level2">
<h2 class="anchored" data-anchor-id="manipulating-data-frames-with-dplyr-1">Manipulating data frames with <code>dplyr</code></h2>
<ul>
<li><code>filter()</code> only a subset of observations</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(gapminder, continent <span class="sc">==</span> <span class="st">"Europe"</span>, year <span class="sc">==</span> <span class="dv">2007</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 6
   country                 year      pop continent lifeExp gdpPercap
   &lt;chr&gt;                  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
 1 Albania                 2007  3600523 Europe       76.4     5937.
 2 Austria                 2007  8199783 Europe       79.8    36126.
 3 Belgium                 2007 10392226 Europe       79.4    33693.
 4 Bosnia and Herzegovina  2007  4552198 Europe       74.9     7446.
 5 Bulgaria                2007  7322858 Europe       73.0    10681.
 6 Croatia                 2007  4493312 Europe       75.7    14619.
 7 Czech Republic          2007 10228744 Europe       76.5    22833.
 8 Denmark                 2007  5468120 Europe       78.3    35278.
 9 Finland                 2007  5238460 Europe       79.3    33207.
10 France                  2007 61083916 Europe       80.7    30470.
# ℹ 20 more rows</code></pre>
</div>
</div>
</section>
<section id="manipulating-data-frames-with-dplyr-2" class="level2">
<h2 class="anchored" data-anchor-id="manipulating-data-frames-with-dplyr-2">Manipulating data frames with <code>dplyr</code></h2>
<ul>
<li><code>mutate()</code> to create new variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(gapminder, <span class="at">gdp_billion =</span> gdpPercap <span class="sc">*</span> pop <span class="sc">/</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 7
   country      year      pop continent lifeExp gdpPercap gdp_billion
   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
 1 Afghanistan  1952  8425333 Asia         28.8      779.        6.57
 2 Afghanistan  1957  9240934 Asia         30.3      821.        7.59
 3 Afghanistan  1962 10267083 Asia         32.0      853.        8.76
 4 Afghanistan  1967 11537966 Asia         34.0      836.        9.65
 5 Afghanistan  1972 13079460 Asia         36.1      740.        9.68
 6 Afghanistan  1977 14880372 Asia         38.4      786.       11.7 
 7 Afghanistan  1982 12881816 Asia         39.9      978.       12.6 
 8 Afghanistan  1987 13867957 Asia         40.8      852.       11.8 
 9 Afghanistan  1992 16317921 Asia         41.7      649.       10.6 
10 Afghanistan  1997 22227415 Asia         41.8      635.       14.1 
# ℹ 1,694 more rows</code></pre>
</div>
</div>
</section>
<section id="manipulating-data-frames-with-dplyr-3" class="level2">
<h2 class="anchored" data-anchor-id="manipulating-data-frames-with-dplyr-3">Manipulating data frames with <code>dplyr</code></h2>
<ul>
<li><code>summarise()</code> to calculate summary statistics</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(gapminder, <span class="at">mean_gdpPercap =</span> <span class="fu">mean</span>(gdpPercap))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  mean_gdpPercap
           &lt;dbl&gt;
1          7215.</code></pre>
</div>
</div>
<p>. . .</p>
<ul>
<li>This is most useful in conjunction with <code>group_by()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(<span class="fu">group_by</span>(gapminder, continent),</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">mean_gdpPercap =</span> <span class="fu">mean</span>(gdpPercap))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  continent mean_gdpPercap
  &lt;chr&gt;              &lt;dbl&gt;
1 Africa             2194.
2 Americas           7136.
3 Asia               7902.
4 Europe            14469.
5 Oceania           18622.</code></pre>
</div>
</div>
</section>
<section id="manipulating-data-frames-with-dplyr-4" class="level2">
<h2 class="anchored" data-anchor-id="manipulating-data-frames-with-dplyr-4">Manipulating data frames with <code>dplyr</code></h2>
<ul>
<li><p>The power of <code>dplyr</code> is in combining several commands using ‘pipes’</p></li>
<li><p>The previous command could be written:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean_gdpPercap =</span> <span class="fu">mean</span>(gdpPercap))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  continent mean_gdpPercap
  &lt;chr&gt;              &lt;dbl&gt;
1 Africa             2194.
2 Americas           7136.
3 Asia               7902.
4 Europe            14469.
5 Oceania           18622.</code></pre>
</div>
</div>
</section>
<section id="reshaping-data-frames" class="level2">
<h2 class="anchored" data-anchor-id="reshaping-data-frames">Reshaping data frames</h2>
<ul>
<li>Previously we said that data frames have variables in columns and observations in rows</li>
<li>There may be different ways to interpret this in any given dataset
<ul>
<li>Our dataset has country-by-year as the observation, and population, life expectancy, and GDP per capita as variables</li>
<li>Sometimes it might make sense to have one row per country (observation), and multiple variables representing years</li>
<li>These are known as ‘long’ and ‘wide’ format, respectively</li>
</ul></li>
</ul>
</section>
<section id="reshaping-data-frames-1" class="level2">
<h2 class="anchored" data-anchor-id="reshaping-data-frames-1">Reshaping data frames</h2>
<ul>
<li>The <code>tidyr</code> package helps us transform our data from one shape to the other
<ul>
<li><code>pivot_wider()</code> takes a long dataset and makes it wider</li>
<li><code>pivot_longer()</code> takes a wide dataset and makes it longer</li>
</ul></li>
<li>Recall our original dataset</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>gapminder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 6
   country      year      pop continent lifeExp gdpPercap
   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan  1952  8425333 Asia         28.8      779.
 2 Afghanistan  1957  9240934 Asia         30.3      821.
 3 Afghanistan  1962 10267083 Asia         32.0      853.
 4 Afghanistan  1967 11537966 Asia         34.0      836.
 5 Afghanistan  1972 13079460 Asia         36.1      740.
 6 Afghanistan  1977 14880372 Asia         38.4      786.
 7 Afghanistan  1982 12881816 Asia         39.9      978.
 8 Afghanistan  1987 13867957 Asia         40.8      852.
 9 Afghanistan  1992 16317921 Asia         41.7      649.
10 Afghanistan  1997 22227415 Asia         41.8      635.
# ℹ 1,694 more rows</code></pre>
</div>
</div>
</section>
<section id="reshaping-data-frames-2" class="level2">
<h2 class="anchored" data-anchor-id="reshaping-data-frames-2">Reshaping data frames</h2>
<ul>
<li>We can reshape this to be wider (one row per country)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>gapminder_wide <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(country, continent),</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">names_from =</span> year, <span class="at">values_from =</span> <span class="fu">c</span>(pop, lifeExp, gdpPercap))</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>gapminder_wide</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 142 × 38
   country     continent pop_1952 pop_1957 pop_1962 pop_1967 pop_1972 pop_1977
   &lt;chr&gt;       &lt;chr&gt;        &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
 1 Afghanistan Asia       8425333  9240934 10267083 11537966 13079460 14880372
 2 Albania     Europe     1282697  1476505  1728137  1984060  2263554  2509048
 3 Algeria     Africa     9279525 10270856 11000948 12760499 14760787 17152804
 4 Angola      Africa     4232095  4561361  4826015  5247469  5894858  6162675
 5 Argentina   Americas  17876956 19610538 21283783 22934225 24779799 26983828
 6 Australia   Oceania    8691212  9712569 10794968 11872264 13177000 14074100
 7 Austria     Europe     6927772  6965860  7129864  7376998  7544201  7568430
 8 Bahrain     Asia        120447   138655   171863   202182   230800   297410
 9 Bangladesh  Asia      46886859 51365468 56839289 62821884 70759295 80428306
10 Belgium     Europe     8730405  8989111  9218400  9556500  9709100  9821800
# ℹ 132 more rows
# ℹ 30 more variables: pop_1982 &lt;dbl&gt;, pop_1987 &lt;dbl&gt;, pop_1992 &lt;dbl&gt;,
#   pop_1997 &lt;dbl&gt;, pop_2002 &lt;dbl&gt;, pop_2007 &lt;dbl&gt;, lifeExp_1952 &lt;dbl&gt;,
#   lifeExp_1957 &lt;dbl&gt;, lifeExp_1962 &lt;dbl&gt;, lifeExp_1967 &lt;dbl&gt;,
#   lifeExp_1972 &lt;dbl&gt;, lifeExp_1977 &lt;dbl&gt;, lifeExp_1982 &lt;dbl&gt;,
#   lifeExp_1987 &lt;dbl&gt;, lifeExp_1992 &lt;dbl&gt;, lifeExp_1997 &lt;dbl&gt;,
#   lifeExp_2002 &lt;dbl&gt;, lifeExp_2007 &lt;dbl&gt;, gdpPercap_1952 &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="reshaping-data-frames-3" class="level2">
<h2 class="anchored" data-anchor-id="reshaping-data-frames-3">Reshaping data frames</h2>
<ul>
<li>Often raw data will come in a wide format, and we want to reshape it longer for data analysis</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>gapminder_wide <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(pop_1952<span class="sc">:</span>gdpPercap_2007,</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">".value"</span>, <span class="st">"year"</span>), <span class="at">names_sep =</span> <span class="st">"_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 6
   country     continent year       pop lifeExp gdpPercap
   &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan Asia      1952   8425333    28.8      779.
 2 Afghanistan Asia      1957   9240934    30.3      821.
 3 Afghanistan Asia      1962  10267083    32.0      853.
 4 Afghanistan Asia      1967  11537966    34.0      836.
 5 Afghanistan Asia      1972  13079460    36.1      740.
 6 Afghanistan Asia      1977  14880372    38.4      786.
 7 Afghanistan Asia      1982  12881816    39.9      978.
 8 Afghanistan Asia      1987  13867957    40.8      852.
 9 Afghanistan Asia      1992  16317921    41.7      649.
10 Afghanistan Asia      1997  22227415    41.8      635.
# ℹ 1,694 more rows</code></pre>
</div>
</div>
</section>
<section id="other-tidyverse-packages" class="level2">
<h2 class="anchored" data-anchor-id="other-tidyverse-packages">Other <code>tidyverse</code> packages</h2>
<ul>
<li>We’ll come back to data visualisation with <code>ggplot2</code> in a later session</li>
<li><code>purrr</code> provides tools for functional programming
<ul>
<li>If we have several similar datasets, or subgroups within our dataset, we don’t want to write out/copy-and-paste our code separately for each one</li>
<li>With <code>purrr</code>, we can use <code>map()</code> (and similar) to apply a function to multiple inputs and extract all of the outputs</li>
</ul></li>
<li><code>stringr</code> and <code>forcats</code> are worth looking at if you need to work with string or factor variables – we won’t cover them here</li>
</ul>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<ul>
<li>This material was adapted from the Data Carpentries’ ‘R for Social Scientists’ course (<a href="https://preview.carpentries.org/r-socialsci/index.html" class="uri">https://preview.carpentries.org/r-socialsci/index.html</a>)</li>
<li>Hands-On Programming with R (<a href="https://rstudio-education.github.io/hopr" class="uri">https://rstudio-education.github.io/hopr</a>)
<ul>
<li>An introduction to programming in R (for non-programmers!)</li>
</ul></li>
<li>R for Data Science (<a href="https://r4ds.hadley.nz" class="uri">https://r4ds.hadley.nz</a>)
<ul>
<li>An excellent practical introduction to using the tidyverse</li>
</ul></li>
<li>Advanced R (<a href="https://adv-r.hadley.nz" class="uri">https://adv-r.hadley.nz</a>) and R Packages (<a href="https://r-pkgs.org" class="uri">https://r-pkgs.org</a>)
<ul>
<li>More advanced – good next steps once you’re a bit more comfortable using R</li>
</ul></li>
</ul>
</section>
</section>
<section id="data-analysis-in-r-regression" class="level1" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1 data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">Data analysis in R (regression)</h1>
<section id="everything-in-r-is-an-object" class="level2">
<h2 class="anchored" data-anchor-id="everything-in-r-is-an-object">Everything in R is an object</h2>
<p>. . .</p>
<ul>
<li>This includes your fitted regression models</li>
</ul>
<p>. . .</p>
<ul>
<li>Workflow:
<ul>
<li>Import/tidy/manipulate raw data</li>
<li>Run regression or other models</li>
<li>Use the created model objects
<ul>
<li>print to console</li>
<li>save to file</li>
<li>extract coefficient estimates</li>
<li>plot results</li>
<li>export to excel/word</li>
<li>etc.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="fitted-model-objects" class="level2">
<h2 class="anchored" data-anchor-id="fitted-model-objects">Fitted model objects</h2>
<ul>
<li><p>R has evolved over time to fit a variety of different needs and use cases</p></li>
<li><p>This gives it great flexibility and ability to meet the needs of different users</p></li>
<li><p>But, the diversity of interfaces, data structures, implementation, and fitted model objects can be a challenge</p>
<ul>
<li>There is often more than one way to fit a given model</li>
<li>What you’ve learned about one model implemented in a given package may not translate well to working with other functions/packages</li>
</ul></li>
<li><p>We’ll cover some tools to help bridge that gap</p></li>
</ul>
</section>
<section id="fitted-model-objects-1" class="level2">
<h2 class="anchored" data-anchor-id="fitted-model-objects-1">Fitted model objects</h2>
<ul>
<li><p>A few common (but not universal) features:</p></li>
<li><p>Models are described by a <code>formula</code>: e.g.&nbsp;<code>y ~ x + z</code></p></li>
<li><p>Data are provided in a data frame (or, equivalently, tibble)</p></li>
<li><p><code>coef()</code>, <code>vcov()</code>, <code>summary()</code> can be used to extract the coefficient estimates, variance covariance matrix, and to print a summary of the fitted model</p></li>
</ul>
</section>
<section id="the-broom-package" class="level2">
<h2 class="anchored" data-anchor-id="the-broom-package">The <code>broom</code> package</h2>
<ul>
<li><p><code>broom</code> provides several functions to convert fitted model objects to tidy tibbles</p></li>
<li><p>Functions:</p>
<ul>
<li><code>tidy()</code>: construct a tibble that summarises the statistical findings (coefficients, p-values, etc.)</li>
<li><code>augment()</code>: add new columns to the original data (predictions/fitted values, etc.)</li>
<li><code>glance()</code>: construct a one-row summary of the model (goodness-of-fit, etc.)</li>
</ul></li>
<li><p>The package works with several model fitting functions from base R and commonly-used packages</p>
<ul>
<li>Some other packages may also implement their own methods to work with these functions</li>
</ul></li>
</ul>
</section>
<section id="first-example-linear-regression" class="level2">
<h2 class="anchored" data-anchor-id="first-example-linear-regression">First example – linear regression</h2>
<ul>
<li><p>Linear regression models can be fitted with the <code>lm()</code> function (in the <code>stats</code> package, part of base R)</p></li>
<li><p>We’ll start by loading the gapminder dataset from the previous session:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"raw_data/gapminder_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="first-example-linear-regression-1" class="level2">
<h2 class="anchored" data-anchor-id="first-example-linear-regression-1">First example – linear regression</h2>
<div class="columns">
<div class="column" style="width:75%;">
<ul>
<li>Use <code>?lm</code> to find the documentation</li>
</ul>
<div class="fragment" data-fragment-index="2">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>linear_regression_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(lifeExp <span class="sc">~</span> gdpPercap <span class="sc">+</span> continent, gapminder)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>linear_regression_model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lifeExp ~ gdpPercap + continent, data = gapminder)

Coefficients:
      (Intercept)          gdpPercap  continentAmericas  
        4.789e+01          4.453e-04          1.359e+01  
    continentAsia    continentEurope   continentOceania  
        8.658e+00          1.757e+01          1.815e+01  </code></pre>
</div>
</div>
</div>
</div>
</div>
<p><img src="images/lm-documentation.png" class="absolute fragment img-fluid" data-fragment-index="1" data-top="50" data-left="820"></p>
</section>
<section id="first-example-linear-regression-2" class="level2">
<h2 class="anchored" data-anchor-id="first-example-linear-regression-2">First example – linear regression</h2>
<ul>
<li><p><code>linear_regression_model</code> is now a fitted model object</p></li>
<li><p>If we want, we can look at how this object is actually stored:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(linear_regression_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 13
 $ coefficients : Named num [1:6] 4.79e+01 4.45e-04 1.36e+01 8.66 1.76e+01 ...
  ..- attr(*, "names")= chr [1:6] "(Intercept)" "gdpPercap" "continentAmericas" "continentAsia" ...
 $ residuals    : Named num [1:1704] -28.1 -26.6 -24.9 -22.9 -20.8 ...
  ..- attr(*, "names")= chr [1:1704] "1" "2" "3" "4" ...
 $ effects      : Named num [1:1704] -2455.1 311.1 100.1 -27.9 -223.1 ...
  ..- attr(*, "names")= chr [1:1704] "(Intercept)" "gdpPercap" "continentAmericas" "continentAsia" ...
 $ rank         : int 6
 $ fitted.values: Named num [1:1704] 56.9 56.9 56.9 56.9 56.9 ...
  ..- attr(*, "names")= chr [1:1704] "1" "2" "3" "4" ...
 $ assign       : int [1:6] 0 1 2 2 2 2
 $ qr           :List of 5
  ..$ qr   : num [1:1704, 1:6] -41.2795 0.0242 0.0242 0.0242 0.0242 ...
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : chr [1:1704] "1" "2" "3" "4" ...
  .. .. ..$ : chr [1:6] "(Intercept)" "gdpPercap" "continentAmericas" "continentAsia" ...
  .. ..- attr(*, "assign")= int [1:6] 0 1 2 2 2 2
  .. ..- attr(*, "contrasts")=List of 1
  .. .. ..$ continent: chr "contr.treatment"
  ..$ qraux: num [1:6] 1.02 1.02 1.01 1.04 1.01 ...
  ..$ pivot: int [1:6] 1 2 3 4 5 6
  ..$ tol  : num 1e-07
  ..$ rank : int 6
  ..- attr(*, "class")= chr "qr"
 $ df.residual  : int 1698
 $ contrasts    :List of 1
  ..$ continent: chr "contr.treatment"
 $ xlevels      :List of 1
  ..$ continent: chr [1:5] "Africa" "Americas" "Asia" "Europe" ...
 $ call         : language lm(formula = lifeExp ~ gdpPercap + continent, data = gapminder)
 $ terms        :Classes 'terms', 'formula'  language lifeExp ~ gdpPercap + continent
  .. ..- attr(*, "variables")= language list(lifeExp, gdpPercap, continent)
  .. ..- attr(*, "factors")= int [1:3, 1:2] 0 1 0 0 0 1
  .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. ..$ : chr [1:3] "lifeExp" "gdpPercap" "continent"
  .. .. .. ..$ : chr [1:2] "gdpPercap" "continent"
  .. ..- attr(*, "term.labels")= chr [1:2] "gdpPercap" "continent"
  .. ..- attr(*, "order")= int [1:2] 1 1
  .. ..- attr(*, "intercept")= int 1
  .. ..- attr(*, "response")= int 1
  .. ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt; 
  .. ..- attr(*, "predvars")= language list(lifeExp, gdpPercap, continent)
  .. ..- attr(*, "dataClasses")= Named chr [1:3] "numeric" "numeric" "character"
  .. .. ..- attr(*, "names")= chr [1:3] "lifeExp" "gdpPercap" "continent"
 $ model        :'data.frame':  1704 obs. of  3 variables:
  ..$ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...
  ..$ gdpPercap: num [1:1704] 779 821 853 836 740 ...
  ..$ continent: chr [1:1704] "Asia" "Asia" "Asia" "Asia" ...
  ..- attr(*, "terms")=Classes 'terms', 'formula'  language lifeExp ~ gdpPercap + continent
  .. .. ..- attr(*, "variables")= language list(lifeExp, gdpPercap, continent)
  .. .. ..- attr(*, "factors")= int [1:3, 1:2] 0 1 0 0 0 1
  .. .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. .. ..$ : chr [1:3] "lifeExp" "gdpPercap" "continent"
  .. .. .. .. ..$ : chr [1:2] "gdpPercap" "continent"
  .. .. ..- attr(*, "term.labels")= chr [1:2] "gdpPercap" "continent"
  .. .. ..- attr(*, "order")= int [1:2] 1 1
  .. .. ..- attr(*, "intercept")= int 1
  .. .. ..- attr(*, "response")= int 1
  .. .. ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt; 
  .. .. ..- attr(*, "predvars")= language list(lifeExp, gdpPercap, continent)
  .. .. ..- attr(*, "dataClasses")= Named chr [1:3] "numeric" "numeric" "character"
  .. .. .. ..- attr(*, "names")= chr [1:3] "lifeExp" "gdpPercap" "continent"
 - attr(*, "class")= chr "lm"</code></pre>
</div>
</div>
</section>
<section id="first-example-linear-regression-3" class="level2">
<h2 class="anchored" data-anchor-id="first-example-linear-regression-3">First example – linear regression</h2>
<ul>
<li>More usefully, we can print a summary of the model</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(linear_regression_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lifeExp ~ gdpPercap + continent, data = gapminder)

Residuals:
    Min      1Q  Median      3Q     Max 
-49.241  -4.479   0.347   5.105  25.138 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)       4.789e+01  3.398e-01  140.93   &lt;2e-16 ***
gdpPercap         4.453e-04  2.350e-05   18.95   &lt;2e-16 ***
continentAmericas 1.359e+01  6.008e-01   22.62   &lt;2e-16 ***
continentAsia     8.658e+00  5.555e-01   15.59   &lt;2e-16 ***
continentEurope   1.757e+01  6.257e-01   28.08   &lt;2e-16 ***
continentOceania  1.815e+01  1.787e+00   10.15   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 8.39 on 1698 degrees of freedom
Multiple R-squared:  0.5793,    Adjusted R-squared:  0.5781 
F-statistic: 467.7 on 5 and 1698 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="first-example-linear-regression-4" class="level2">
<h2 class="anchored" data-anchor-id="first-example-linear-regression-4">First example – linear regression</h2>
<ul>
<li>If we want to work with the results or combine/compare them with other models, <code>tidy()</code> from the <code>broom</code> package will put them into a nice tidy tibble</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(linear_regression_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  term               estimate std.error statistic   p.value
  &lt;chr&gt;                 &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)       47.9      0.340         141.  0        
2 gdpPercap          0.000445 0.0000235      18.9 8.55e- 73
3 continentAmericas 13.6      0.601          22.6 2.82e- 99
4 continentAsia      8.66     0.555          15.6 2.72e- 51
5 continentEurope   17.6      0.626          28.1 7.60e-143
6 continentOceania  18.1      1.79           10.2 1.50e- 23</code></pre>
</div>
</div>
<p>. . .</p>
<ul>
<li>And <code>glance()</code> gives us several overall model statistics</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(linear_regression_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squared adj.r.squared sigma statistic   p.value    df logLik    AIC    BIC deviance
      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
1     0.579         0.578  8.39      468. 4.26e-316     5 -6039. 12093. 12131.  119528.
# ℹ 2 more variables: df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="first-example-linear-regression-5" class="level2">
<h2 class="anchored" data-anchor-id="first-example-linear-regression-5">First example – linear regression</h2>
<ul>
<li>The <code>lmtest</code> and <code>car</code> packages provide tools for inference &amp; hypothesis testing</li>
<li>Various clustered and heteroskedasticity-robust standard errors are provided by <code>sandwich</code>
<ul>
<li>These work well together (and with <code>tidy()</code> from <code>broom</code>)</li>
</ul></li>
</ul>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lmtest)</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sandwich)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>linear_regression_model <span class="sc">%&gt;%</span> </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcovCL, <span class="at">cluster =</span> <span class="sc">~</span>country) <span class="sc">%&gt;%</span> </span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  term               estimate std.error statistic  p.value
  &lt;chr&gt;                 &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)       47.9       0.904        53.0  0       
2 gdpPercap          0.000445  0.000159      2.81 5.05e- 3
3 continentAmericas 13.6       1.56          8.69 8.32e-18
4 continentAsia      8.66      1.55          5.57 2.98e- 8
5 continentEurope   17.6       2.18          8.06 1.44e-15
6 continentOceania  18.1       2.77          6.55 7.36e-11</code></pre>
</div>
</div>
</section>
<section id="generalised-linear-regression" class="level2">
<h2 class="anchored" data-anchor-id="generalised-linear-regression">Generalised linear regression</h2>
<ul>
<li>Can be fitted with the <code>glm()</code> function<br>
(also in the <code>stats</code> package)</li>
</ul>
<div class="fragment" data-fragment-index="1">
<ul>
<li><code>?glm</code></li>
</ul>
</div>
<div class="fragment" data-fragment-index="2">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>gen_linear_regression_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(lifeExp <span class="sc">~</span> gdpPercap <span class="sc">+</span> continent,</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">family =</span> <span class="st">"quasipoisson"</span>, gapminder)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>gen_linear_regression_model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:  glm(formula = lifeExp ~ gdpPercap + continent, family = "quasipoisson", 
    data = gapminder)

Coefficients:
      (Intercept)          gdpPercap  continentAmericas  
        3.875e+00          6.156e-06          2.490e-01  
    continentAsia    continentEurope   continentOceania  
        1.671e-01          3.092e-01          3.177e-01  

Degrees of Freedom: 1703 Total (i.e. Null);  1698 Residual
Null Deviance:      4946 
Residual Deviance: 2229     AIC: NA</code></pre>
</div>
</div>
</div>
<p><img src="images/glm-documentation.png" class="absolute fragment img-fluid" data-fragment-index="1" data-top="50" data-left="820"></p>
</section>
<section id="generalised-linear-regression-1" class="level2">
<h2 class="anchored" data-anchor-id="generalised-linear-regression-1">Generalised linear regression</h2>
<ul>
<li>Again, we can print a summary of the model</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(gen_linear_regression_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = lifeExp ~ gdpPercap + continent, family = "quasipoisson", 
    data = gapminder)

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)       3.875e+00  6.524e-03  594.03   &lt;2e-16 ***
gdpPercap         6.156e-06  3.475e-07   17.72   &lt;2e-16 ***
continentAmericas 2.490e-01  1.054e-02   23.62   &lt;2e-16 ***
continentAsia     1.671e-01  1.009e-02   16.55   &lt;2e-16 ***
continentEurope   3.092e-01  1.054e-02   29.33   &lt;2e-16 ***
continentOceania  3.177e-01  2.815e-02   11.29   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for quasipoisson family taken to be 1.279258)

    Null deviance: 4945.6  on 1703  degrees of freedom
Residual deviance: 2229.4  on 1698  degrees of freedom
AIC: NA

Number of Fisher Scoring iterations: 4</code></pre>
</div>
</div>
</section>
<section id="generalised-linear-regression-2" class="level2">
<h2 class="anchored" data-anchor-id="generalised-linear-regression-2">Generalised linear regression</h2>
<ul>
<li>And use <code>tidy()</code> and <code>glance()</code> from the <code>broom</code> package to produce nice tidy tibbles</li>
</ul>
<p>. . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(gen_linear_regression_model, <span class="at">conf.int =</span> <span class="cn">TRUE</span>, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
  term              estimate   std.error statistic   p.value conf.low conf.high
  &lt;chr&gt;                &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)          48.2  0.00652         594.  0            47.6      48.8 
2 gdpPercap             1.00 0.000000347      17.7 1.42e- 64     1.00      1.00
3 continentAmericas     1.28 0.0105           23.6 6.86e-107     1.26      1.31
4 continentAsia         1.18 0.0101           16.6 3.57e- 57     1.16      1.21
5 continentEurope       1.36 0.0105           29.3 2.32e-153     1.33      1.39
6 continentOceania      1.37 0.0282           11.3 1.57e- 28     1.30      1.45</code></pre>
</div>
</div>
<p>. . .</p>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(gen_linear_regression_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 8
  null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs
          &lt;dbl&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;int&gt; &lt;int&gt;
1         4946.    1703     NA    NA    NA    2229.        1698  1704</code></pre>
</div>
</div>
</section>
<section id="what-else" class="level2">
<h2 class="anchored" data-anchor-id="what-else">What else?</h2>
<ul>
<li><p>There are many (<strong>many!</strong>) other packages that estimate different regression models or provide tools for diagnostic testing, post-hoc analysis, or visualisation of regression models</p></li>
<li><p>For example, the <a href="https://cran.r-project.org/web/views/Econometrics.html" data-preview-link="true">Econometrics Task View</a> on cran.r-project.org</p></li>
</ul>
<p>. . .</p>
<ul>
<li>Some that might be of particular relevance to (some of) you:
<ul>
<li><a href="https://cran.r-project.org/web/packages/mediation/index.html"><code>mediation</code></a>: parametric and non-parametric mediation analysis</li>
<li><a href="https://cran.r-project.org/web/packages/eRm/index.html"><code>eRm</code></a> and <a href="https://cran.r-project.org/web/packages/ltm/index.html"><code>ltm</code></a>: Rasch models</li>
<li><a href="https://cran.r-project.org/web/packages/metafor/index.html"><code>metafor</code></a>: meta-analysis</li>
<li><a href="https://cran.r-project.org/web/packages/rstan/index.html"><code>rstan</code></a>, <a href="https://cran.r-project.org/web/packages/rstanarm/index.html"><code>rstanarm</code></a>, and <a href="https://cran.r-project.org/web/packages/brms/index.html"><code>brms</code></a>: Bayesian analysis (using <a href="http://mc-stan.org/">Stan</a>)</li>
<li><a href="https://cran.r-project.org/web/packages/plm/index.html"><code>plm</code></a>, <a href="https://cran.r-project.org/web/packages/fixest/index.html"><code>fixest</code></a>, <a href="https://cran.r-project.org/web/packages/lme4/index.html"><code>lme4</code></a>, and <a href="https://cran.r-project.org/web/packages/nlme/index.html"><code>nlme</code></a>: panel and multi-level/mixed effect models</li>
</ul></li>
</ul>
</section>
</section>
<section id="data-visualisation" class="level1" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1 data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">Data visualisation</h1>
<section id="data-visualisation-with-ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="data-visualisation-with-ggplot2">Data visualisation with <code>ggplot2</code></h2>
<ul>
<li>There are a lot of tools available to create plots in R
<ul>
<li><code>ggplot2</code> is the most well-developed and widely used</li>
</ul></li>
<li>We generally want data in long format for plotting
<ul>
<li>One column for each variable</li>
<li>One row for each observation</li>
</ul></li>
<li>We’ll use the <code>gapminder</code> dataset from the previous session</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"raw_data/gapminder_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-grammar-of-graphics" class="level2">
<h2 class="anchored" data-anchor-id="the-grammar-of-graphics">The grammar of graphics</h2>
<ul>
<li>dataset – self-explanatory</li>
<li>geom – the geometric object used to represent the data</li>
<li>mappings – which features of the geom represent which variables in the data</li>
<li>stats – transformations of the data before plotting</li>
<li>position – to avoid overplotting data points</li>
<li>coordinate system – how the x and y axes are plotted</li>
<li>faceting scheme – split the plot by subgroups</li>
</ul>
</section>
<section id="data-visualisation-with-ggplot2-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="data-visualisation-with-ggplot2-1">Data visualisation with <code>ggplot2</code></h2>
<ul>
<li>That’s the theory</li>
<li>In practice, the easiest way is to build the plot up step-by-step (trial-and-error)
<ul>
<li>start with the basic <code>ggplot</code> object</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment" data-fragment-index="1">
<p><img src="images/ggplot-blank.png" class="absolute fragment fade-out" data-fragment-index="2" data-top="100" data-left="200" width="550" height="550"></p>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li>you can specify (some of) the mappings at this stage</li>
</ul>
<div class="sourceCode" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> gapminder, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment fade-in" data-fragment-index="3">
<p><img src="images/ggplot-axes.png" class="absolute fragment fade-out" data-top="100" data-left="200" width="550" height="550"></p>
</div>
</section>
</section>
<section id="data-analysis-workflows-and-project-organisation" class="level1" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1 data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">Data analysis workflows and project organisation</h1>
<section id="reproducible-research" class="level2">
<h2 class="anchored" data-anchor-id="reproducible-research">Reproducible research</h2>
<ul>
<li>What is ‘reproducibility’?
<ul>
<li>Focus here is on <em>computational reproducibility</em> – can your results be replicated by someone (or yourself!) with access to your data, code, etc.</li>
</ul></li>
<li>Why might research not be reproducible?
<ul>
<li>Raw data are not available or have been changed</li>
<li>Intermediate steps taken to extract, clean, reshape, merge, or analyse data are not adequately recorded or described</li>
<li>Software tools have changed or are no longer available since the analysis was conducted</li>
<li>Errors in manually transcribing results from analysis software to final report (manuscript, etc.)</li>
</ul></li>
</ul>
</section>
<section id="reproducible-research-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="reproducible-research-1">Reproducible research</h2>
<p><br></p>
<blockquote class="blockquote">
<p>Computers are now essential in all branches of science, but most researchers are never taught the equivalent of basic lab skills for research computing. As a result, data can get lost, analyses can take much longer than necessary, and researchers are limited in how effectively they can work with software and data. Computing workflows need to follow the same practices as lab projects and notebooks, with organized data, documented steps, and the project structured for reproducibility, but researchers new to computing often don’t know where to start.</p>
</blockquote>
<p>— Wilson G, Bryan J, Cranston K, et al.&nbsp;<em>Good enough practices in scientific computing</em>. PLoS Comput Biol 2017;13:e1005510</p>
</section>
<section id="reproducible-research-2" class="level2">
<h2 class="anchored" data-anchor-id="reproducible-research-2">Reproducible research</h2>
<ul>
<li>Ensuring reproducibility (for others) can also have great benefits for you as the analyst/author
<ul>
<li>When you come back to an analysis later, you know exactly what you did, why you did it, and how to replicate it if needed</li>
<li>If data changes, errors are identified, or new analyses need to be conducted, your analysis and results can easily be updated</li>
<li>The code and methods used in one project/analysis can be re-used in other work</li>
<li>Keeping to a simple, standardised workflow for all projects allows you to switch easily &amp; quickly between projects
<ul>
<li>And prevents you having to make a whole bunch of new decisions every time you start something new</li>
</ul></li>
</ul></li>
</ul>
<hr>
<p><img src="images/interconnected-tasks.png" class="img-fluid"></p>
</section>
<section id="key-principles" class="level2">
<h2 class="anchored" data-anchor-id="key-principles">Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-raw-data" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-raw-data">Key principles – Raw data</h2>
<ul>
<li>Raw data stays raw
<ul>
<li>Make raw data files read-only</li>
</ul></li>
</ul>
</section>
<section id="key-principles-raw-data-1" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-raw-data-1">Key principles – Raw data</h2>
<p><img src="images/read-only.png" class="img-fluid"></p>
</section>
<section id="key-principles-raw-data-2" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-raw-data-2">Key principles – Raw data</h2>
<ul>
<li>Raw data stays raw
<ul>
<li>Make raw data files read-only</li>
<li>Can be relaxed (temporarily) if needed, but avoids accidental changes</li>
<li>Most (probably all) changes to data should be scripted (in R, Stata, etc.) rather than made directly in raw data files</li>
</ul></li>
</ul>
</section>
<section id="key-principles-1" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-1">Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-2" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-2">Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li><span style="color:Red;">Source is real</span></li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-source-files" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-source-files">Key principles – Source files</h2>
<ul>
<li>Source is real…
<ul>
<li>…workspace is replaceable</li>
</ul></li>
<li>Any individual R session is disposable and can be replaced/recreated at any time, if you have raw data and appropriate source code</li>
<li>Thinking in this way forces you to follow good reproducibility practices in your analysis workflow</li>
</ul>
</section>
<section id="key-principles-source-files-1" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-source-files-1">Key principles – Source files</h2>
<ul>
<li>What does ‘Source is real’ mean?
<ul>
<li>Data import, cleaning, reshaping, wrangling, and analysis should all be conducted via script files
<ul>
<li>or at least documented in thorough, step-by-step detail</li>
</ul></li>
<li>All source code should be saved (regularly!) so all of these steps can be reproduced at any time</li>
<li>Important (or time-consuming) intermediate objects (cleaned datasets, figures, etc) should be explicitly saved, individually, to files (by script, not the mouse, if possible)</li>
</ul></li>
</ul>
</section>
<section id="key-principles-source-files-2" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-source-files-2">Key principles – Source files</h2>
<ul>
<li>Start R with a blank slate, and restart often</li>
</ul>
</section>
<section id="key-principles-source-files-3" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-source-files-3">Key principles – Source files</h2>
<p><img src="images/save-workspace.PNG" class="img-fluid"></p>
<div class="absolute" data-top="330" data-left="130" width="260" height="72" style="border-style:solid; border-width:5px; border-color:red;">

</div>
</section>
<section id="key-principles-source-files-4" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-source-files-4">Key principles – Source files</h2>
<ul>
<li>Start R with a blank slate, and restart often
<ul>
<li>When you are running code interactively to try things out, you will be adding objects to the workspace, loading packages, etc</li>
<li>If you inadvertently rely on these objects, packages, etc in your source files, you may not be able to reproduce your results in a new session later</li>
<li>If you have saved source code and intermediate objects to file as you go, it is quick and easy to restart R (Ctrl+Shift+F10, in RStudio) regularly to check whether everything still works as expected
<ul>
<li>It is much better to find this out after a few minutes than after a whole day’s work!</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="key-principles-3" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-3">Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-4" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-4">Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li><span style="color:Red;">Design for collaboration</span>
<ul>
<li><span style="color:Red;">(including with your future self)</span></li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-design-for-collaboration" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-design-for-collaboration">Key principles – Design for collaboration</h2>
<p>. . .</p>
<ul>
<li>An analysis directory like this makes it very difficult for anyone (including yourself later) to follow the steps required to reproduce your results</li>
</ul>
<hr>
<p><img src="images/bad_layout.png" class="img-fluid"></p>
</section>
<section id="key-principles-design-for-collaboration-1" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-design-for-collaboration-1">Key principles – Design for collaboration</h2>
<div class="columns">
<div class="column">
<ul>
<li>Much better to follow a logical structure (and the same across all of your projects)
<ul>
<li>Set out high-level structure, e.g.
<ol type="1">
<li>read raw data</li>
<li>tidy data for analysis</li>
<li>run analyses on tidy data</li>
<li>collate report/results of analyses</li>
</ol></li>
<li>Put raw data in its own directory (and read-only)</li>
<li>Consider other structures/subfolders as appropriate for your project</li>
</ul></li>
</ul>
</div><div class="column">
<p><img src="images/better-layout.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="key-principles-design-for-collaboration-2" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-design-for-collaboration-2">Key principles – Design for collaboration</h2>
<ul>
<li>Break up complicated or repeated analysis steps into discrete functions</li>
<li>Give functions and variables meaningful names</li>
<li>Use comments liberally</li>
</ul>
<p><img src="images/functions.png" class="fragment absolute img-fluid" data-top="200" data-left="450"></p>
</section>
<section id="key-principles-5" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-5">Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-6" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-6">Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li><span style="color:Red;">Consider version control</span></li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-version-control" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-version-control">Key principles – Version control</h2>
<ul>
<li><p>Keeping track of changes to data and code (and being able to revert to a previous version if things go wrong) is critical for reproducible research</p></li>
<li><p>This is particularly true when collaborating with others</p></li>
<li><p>The best way to do this is with a version control system such as Git</p></li>
</ul>
</section>
<section id="key-principles-version-control-1" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-version-control-1">Key principles – Version control</h2>
<ul>
<li>We won’t go into this in detail today, but a quick Getting Started guide:
<ul>
<li>Register a GitHub account (<a href="https://github.com" class="uri">https://github.com</a>)</li>
<li>Install Git (<a href="https://git-scm.com" class="uri">https://git-scm.com</a>) and complete basic setup</li>
<li>Get a Git client (GUI)
<ul>
<li>GitKraken is a good choice (<a href="https://gitkraken.com" class="uri">https://gitkraken.com</a>)</li>
<li>GitHub offers a free client, GitHub Desktop (<a href="https://desktop.github.com/" class="uri">https://desktop.github.com/</a>)</li>
<li>RStudio has a basic Git client built-in, which is fine for much day-to-day use</li>
</ul></li>
</ul></li>
<li>See <a href="https://happygitwithr.com/" class="uri">https://happygitwithr.com/</a> for more detailed instructions</li>
</ul>
</section>
<section id="key-principles-version-control-2" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-version-control-2">Key principles – Version control</h2>
<ul>
<li>Using Git (&amp; GitHub) in your projects
<ul>
<li>A couple of ways to get this set up. Probably the easiest is:</li>
<li>Create a project repository (repo) on GitHub</li>
<li>Import (‘clone’) the repo as a new RStudio project</li>
<li>Make changes as usual in RStudio (or any other program)</li>
<li>‘Commit’ (take a snapshot of the current state of the project) often to your local repo</li>
<li>Less often (maybe once/day) ‘push’ (sync) the local repo to GitHub</li>
</ul></li>
<li>What to put under version control
<ul>
<li>Source code</li>
<li>Raw data (unless its very large)</li>
</ul></li>
</ul>
<div class="absolute fragment" data-top="480" data-left="500" width="500" style="background:#ffffff; border-style:solid; border-width:medium; border-color:red; font-size:0.9em; margin-left:20px; line-height:0.9;">
<p>What <strong>not</strong> to put under version control</p>
<ul>
<li>Most intermediate objects</li>
<li>Miscellaneous supporting documents (pdf files, etc.)</li>
<li>Final output in the form of word documents, etc.</li>
</ul>
</div>
</section>
<section id="key-principles-7" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-7">Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-8" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-8">Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li><span style="color:Red;">Automation?</span></li>
</ul>
</section>
<section id="key-principles-automation" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-automation">Key principles – Automation</h2>
<ul>
<li>Just as we treat source code as the ‘true’, reproducible record of each step of the analysis, we can record (and automate) how the sequence of individual steps fits together to produce our final results</li>
</ul>
<div class="fragment" data-fragment-index="1">
<div class="fragment fade-out" data-fragment-index="2">
<p><img src="images/workflow.png" class="absolute img-fluid" data-top="100" data-left="333"></p>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li><p>Can be as simple as something like:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"code/00-download-data.R"</span>)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"code/01-tabulate-frequencies.R"</span>)</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"code/02-create-histogram.R"</span>)</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"code/03-render-report.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Shows in what order to run the scripts, and allows us to resume from the middle (if, for example, you have only changed the file <code>02-create-histogram.R</code>, there is no need to redo the first two steps, but we do need to rerun the <code>create-histogram</code> and <code>render-report</code> steps</p>
<ul>
<li>Each script should load the required inputs and save the resulting output to file</li>
</ul></li>
</ul>
</div>
</section>
<section id="key-principles-automation-1" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-automation-1">Key principles – Automation</h2>
<ul>
<li><p>For more complicated (or long-running) analyses, we may want to explicitly specify dependencies and let the computer figure out how to get everything up-to-date</p></li>
<li><p>Two good tools for doing this:</p>
<ul>
<li>make</li>
<li>targets</li>
</ul></li>
<li><p>Advantages of an automated pipeline like this:</p>
<ul>
<li>When you modify one stage of the pipeline, you can re-run your analyses to get up-to-date final results, with a single click/command</li>
<li>Only the things that need to be updated will be re-run, saving time (important if some of your analyses take a long time to run)</li>
</ul></li>
</ul>
</section>
<section id="key-principles-automation-2" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-automation-2">Key principles – Automation</h2>
<ul>
<li><p>Make is a system tool, designed for use in software development, to specify targets, commands, and dependencies between files and selectively re-run commands when dependencies change</p></li>
<li><p>A Makefile is a plain text file specifying a list of these targets (intermediate/output files in the analysis workflow), commands (to create the targets), and dependencies (input files needed for each command)</p></li>
</ul>
<div class="sourceCode" id="cb69"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="ex">words.txt:</span> /usr/share/dict/words</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cp</span> /usr/share/dict/words words.txt</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="ex">histogram.tsv:</span> histogram.r words.txt</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Rscript</span> $<span class="op">&lt;</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="ex">histogram.png:</span> histogram.tsv</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">'library(ggplot2); qplot(Length, Freq, data=read.delim("$&lt;")); ggsave("$@")'</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="ex">report.html:</span> report.rmd histogram.tsv histogram.png</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">'rmarkdown::render("$&lt;")'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="key-principles-automation-3" class="level2">
<h2 class="anchored" data-anchor-id="key-principles-automation-3">Key principles – Automation</h2>
<ul>
<li><code>targets</code> is an R package designed to do something very similar, but specifically designed for R projects</li>
</ul>
<div class="sourceCode" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>plan <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_file</span>(words, <span class="fu">download_words</span>()),</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(frequency_table, <span class="fu">summarise_word_lengths</span>(words)),</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(histogram, <span class="fu">create_histogram</span>(frequency_table)),</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_file</span>(report, <span class="fu">render_report</span>(<span class="st">"reports/report.rmd"</span>, frequency_table, histogram))</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Abstract workflow steps behind function calls (with meaningful names) as much as possible
<ul>
<li>The plan should be a clear, high-level overview of the analysis steps required</li>
</ul></li>
</ul>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<ul>
<li>Treat raw data as read-only</li>
<li>Save source, not the workspace</li>
<li>Design for collaboration
<ul>
<li>Follow a logical project structure</li>
<li>Simplify code with human-readable abstractions (functions etc)</li>
</ul></li>
<li>Consider version control</li>
<li>Consider automating your analyses</li>
</ul>
<hr>
<p><img src="images/owl.jpg" class="img-fluid"></p>
</section>
<section id="summary-1" class="level2">
<h2 class="anchored" data-anchor-id="summary-1">Summary</h2>
<ul>
<li>Treat raw data as read-only <img src="images/tick.jpg" class="fragment img-fluid" style="height:1em" data-fragment-index="1"></li>
<li>Save source, not the workspace <img src="images/tick.jpg" class="fragment img-fluid" style="height:1em" data-fragment-index="3"></li>
<li>Design for collaboration
<ul>
<li>Follow a logical project structure <img src="images/tick.jpg" class="fragment img-fluid" style="height:1em" data-fragment-index="2"></li>
<li>Simplify code with human-readable abstractions (functions etc) <img src="images/tick.jpg" class="fragment img-fluid" style="height:1em" data-fragment-index="4"></li>
</ul></li>
<li>Consider version control</li>
<li>Consider automating your analyses</li>
</ul>
<div class="absolute fragment" data-fragment-index="3" data-top="120" data-left="540" style="color:#0070c0; font-size:0.6em; line-height:0.6em;">
<p>(if you are already writing<br>script files for your analyses)</p>
</div>
<div class="absolute fragment" data-fragment-index="4" data-top="325" data-left="800" style="color:#0070c0; font-size:0.6em; line-height:0.6em;">
<p>(will get better<br>with practice)</p>
</div>
<div class="absolute fragment" data-fragment-index="5" data-top="445" data-left="70" style="color:#0070c0; font-size:0.8em; line-height:0.8em;">
<p>(start with a simple high-level overview of the steps in the analysis,<br>even if you don’t want to do a full automated pipeline)</p>
</div>
</section>
<section id="resources-1" class="level2 smaller">
<h2 class="smaller anchored" data-anchor-id="resources-1">Resources</h2>
<ul>
<li>Wilson G, Aruliah DA, Brown CT, Chue Hong NP, Davis M, et al.&nbsp;(2014) Best Practices for Scientific Computing. PLoS Biol 12(1):e1001745. <a href="https://doi.org/10.1371/journal.pbio.1001745" class="uri">https://doi.org/10.1371/journal.pbio.1001745</a></li>
<li>Wilson G, Bryan J, Cranston K, Kitzes J, Nederbragt L, Teal TK (2017) Good enough practices in scientific computing. PloS Comput Biol 13(6):e1005510. <a href="https://doi.org/10.1371/journal.pcbi.1005510" class="uri">https://doi.org/10.1371/journal.pcbi.1005510</a></li>
<li>Bryan J, Hester J. What they forgot to teach you about R. <a href="https://rstats.wtf" class="uri">https://rstats.wtf</a> (especially Section I: A holistic workflow)</li>
<li>Bryan J. STAT545 (based on the UBC course of the same name). <a href="https://stat545.com" class="uri">https://stat545.com</a></li>
<li>Bryan J. Happy Git and GitHub for the useR. <a href="https://happygitwithr.com" class="uri">https://happygitwithr.com</a></li>
<li>For targets:
<ul>
<li>McBain M. Benefits of a function-based diet (The {drake} post). <a href="https://milesmcbain.xyz/the-drake-post/" class="uri">https://milesmcbain.xyz/the-drake-post/</a>
<ul>
<li>Refers to the <code>drake</code> package, which was a predecessor package of <code>targets</code>. The same concepts all apply</li>
</ul></li>
<li>Landau W. The {targets} R package user manual. <a href="https://books.ropensci.org/targets/" class="uri">https://books.ropensci.org/targets/</a></li>
</ul></li>
</ul>
</section>
</section>
<section id="writing-reports-in-r" class="level1" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1 data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">Writing reports in R</h1>
<section id="data-workflow" class="level2">
<h2 class="anchored" data-anchor-id="data-workflow">Data workflow</h2>
<p><img src="images/linear-workflow.png" class="absolute" data-top="180" width="1500" height="400"></p>
<p><img src="images/workflow-arrows.png" class="absolute fragment img-fluid" data-top="55"></p>
<div class="absolute fragment" data-top="100" data-left="500" width="850" style="background:#F2F2F233;">
<div class="sourceCode" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>plan <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_file</span>(words, <span class="fu">download_words</span>()),</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(frequency_table, <span class="fu">summarise_word_lengths</span>(words)),</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(histogram, <span class="fu">create_histogram</span>(frequency_table)),</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_file</span>(report, <span class="fu">render_report</span>(<span class="st">"reports/report.rmd"</span>, frequency_table, histogram))</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="absolute fragment" data-top="400" data-left="-100" width="500" style="background:#FFC20FCC; font-size:0.8em;">
<p>Advantages:</p>
<ul>
<li>Reported results are always kept up-to-date with data and analysis</li>
<li>Changes at any point along the workflow can be made easily and robustly</li>
</ul>
</div>
<hr>
<div class="quarto-video"><iframe data-external="1" src="https://www.youtube.com/embed/s3JldKoA0zw" width="100%" height="100%" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</section>
<section id="data-workflow-1" class="level2">
<h2 class="anchored" data-anchor-id="data-workflow-1">Data workflow</h2>
<p><img src="images/linear-workflow.png" class="absolute" data-top="180" width="1500" height="400"></p>
<p><img src="images/workflow-arrows.png" class="absolute img-fluid" data-top="55"></p>
<div class="absolute" data-top="100" data-left="500" width="850" style="background:#F2F2F233;">
<div class="sourceCode" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>plan <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_file</span>(words, <span class="fu">download_words</span>()),</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(frequency_table, <span class="fu">summarise_word_lengths</span>(words)),</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_target</span>(histogram, <span class="fu">create_histogram</span>(frequency_table)),</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tar_file</span>(report, <span class="fu">render_report</span>(<span class="st">"reports/report.rmd"</span>, frequency_table, histogram))</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="absolute" data-top="400" data-left="-100" width="500" style="background:#FFC20FCC; font-size:0.8em;">
<p>Advantages:</p>
<ul>
<li>Reported results are always kept up-to-date with data and analysis</li>
<li>Changes at any point along the workflow can be made easily and robustly</li>
</ul>
</div>
</section>
<section id="r-markdown" class="level2">
<h2 class="anchored" data-anchor-id="r-markdown">R Markdown</h2>
<div class="quarto-video"><iframe data-external="1" src="https://player.vimeo.com/video/178485416?embedded=true&amp;source=video_title&amp;owner=22717988" width="100%" height="85%" frameborder="0" allow="autoplay; title=" "="" fullscreen;="" picture-in-picture"="" allowfullscreen=""></iframe></div>
</section>
<section id="quarto" class="level2">
<h2 class="anchored" data-anchor-id="quarto">Quarto</h2>
<ul>
<li>We’ll focus on Quarto instead</li>
<li>Quarto is a relatively new tool very similar to RMarkdown
<ul>
<li>Most of what you might read about RMarkdown also applies to Quarto</li>
<li>see also <a href="https://quarto.org" class="uri">https://quarto.org</a> for documentation and guides</li>
</ul></li>
</ul>
<hr>
</section>
</section>
<section id="version-control" class="level1" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1 data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">Version control</h1>
</section>
<section id="automation" class="level1" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1 data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">Automation</h1>
</section>
<section id="programming-in-r" class="level1" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1 data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">Programming in R</h1>


</section>

</main> <!-- /main -->

<script>
  // htmlwidgets need to know to resize themselves when slides are shown/hidden.
  // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
  // slide changes (different for each slide format).
  (function () {
    // dispatch for htmlwidgets
    function fireSlideEnter() {
      const event = window.document.createEvent("Event");
      event.initEvent("slideenter", true, true);
      window.document.dispatchEvent(event);
    }

    function fireSlideChanged(previousSlide, currentSlide) {
      fireSlideEnter();

      // dispatch for shiny
      if (window.jQuery) {
        if (previousSlide) {
          window.jQuery(previousSlide).trigger("hidden");
        }
        if (currentSlide) {
          window.jQuery(currentSlide).trigger("shown");
        }
      }
    }

    // hookup for slidy
    if (window.w3c_slidy) {
      window.w3c_slidy.add_observer(function (slide_num) {
        // slide_num starts at position 1
        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
      });
    }

  })();
</script>

<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>