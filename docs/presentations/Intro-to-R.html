<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-99.9.9">

  <meta name="author" content="Ross Wilson">
  <meta name="dcterms.date" content="2023-03-08">
  <title>CMOR Lunch'n'Learn – Introduction to R</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    <style type="text/css">

      .reveal div.sourceCode {
        margin: 0;
        overflow: auto;
      }

      .reveal div.hanging-indent {
        margin-left: 1em;
        text-indent: -1em;
      }

      .reveal .slide:not(.center) {
        height: 100%;
        <% if (scrollable) { %>overflow-y: auto;<% } %>
      }

      .reveal .slide.scrollable {
        overflow-y: auto;
      }

      .reveal .footnotes {
        height: 100%;
        overflow-y: auto;
      }

      .reveal .slide .absolute {
        position: absolute;
        display: block;
      }

      .reveal .footnotes ol {
        counter-reset: ol;
        list-style-type: none; 
        margin-left: 0;
      }

      .reveal .footnotes ol li:before {
        counter-increment: ol;
        content: counter(ol) ". "; 
      }

      .reveal .footnotes ol li > p:first-child {
        display: inline-block;
      }


      .reveal .slide ul,
      .reveal .slide ol {
        margin-bottom: 0.5em;
      }

      .reveal .slide ul li,
      .reveal .slide ol li {
        margin-top: 0.4em;
        margin-bottom: 0.2em;
      }
      
      .reveal .slide ul li li,
      .reveal .slide ol li li {
      	font-size: 0.9em;
      }

      .reveal .slide ul li li li,
      .reveal .slide ol li li li {
      	font-size: 0.8em;
      }

      .reveal .slide ul[role="tablist"] li {
        margin-bottom: 0;
      }

      .reveal .slide ul li > *:first-child,
      .reveal .slide ol li > *:first-child {
        margin-block-start: 0;
      }
      .reveal .slide ul li > *:last-child,
      .reveal .slide ol li > *:last-child {
        margin-block-end: 0;
      }

      .reveal .slide .columns:nth-child(3) {
        margin-block-start: 0.8em;
      }

      .reveal blockquote {
        box-shadow: none;
      }

      .reveal .tippy-content>* {
        margin-top: 0.2em;
        margin-bottom: 0.7em;
      }

      .reveal .tippy-content>*:last-child {
        margin-bottom: 0.2em;
      }

      .reveal .slide > img.stretch.quarto-figure-center,
      .reveal .slide > img.r-stretch.quarto-figure-center {
        display: block;
        margin-left: auto;
        margin-right: auto; 
      }

      .reveal .slide > img.stretch.quarto-figure-left,
      .reveal .slide > img.r-stretch.quarto-figure-left  {
        display: block;
        margin-left: 0;
        margin-right: auto; 
      }

      .reveal .slide > img.stretch.quarto-figure-right,
      .reveal .slide > img.r-stretch.quarto-figure-right  {
        display: block;
        margin-left: auto;
        margin-right: 0; 
      }

    </style></style>  
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-position="3% 1%, bottom 1% left 50px,0 0" data-background-repeat="no-repeat" data-background-size="7%, 25%, 100%" class="center">
  <h1 class="title">Introduction to R</h1>
  <p class="subtitle">CMOR Lunch’n’Learn</p>
  <p class="date">8 March 2023</p>
  <p class="author">Ross Wilson</p>
</section>
<section>
<section id="getting-started" class="title-slide slide level1 center" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1>Getting Started</h1>

</section>
<section id="what-is-r-what-is-rstudio" class="slide level2">
<h2>What is R? What is RStudio?</h2>
<ul>
<li>R is a <em>programming language</em> designed to undertake statistical analysis</li>
<li>RStudio is an Integrated Development Environment (IDE) for R
<ul>
<li>An IDE is a piece of software including a text editor and other tools to make programming (in this case programming in R, specifically) easier</li>
<li>You don’t need to use RStudio to use R, but it makes it <strong><em>a lot</em></strong> easier</li>
<li>To use RStudio, you also need R installed and working</li>
</ul></li>
</ul>
</section>
<section id="why-learn-r" class="slide level2">
<h2>Why learn R?</h2>
<ul>
<li>Powerful and extensible
<ul>
<li>Pretty much any statistical analysis you want to do can be done in R</li>
<li>There are a huge number of freely-available user-written packages that provide all sorts of additional functionality</li>
</ul></li>
<li>Reproducibility
<ul>
<li>By writing R scripts (code) for your analyses, they can be easily checked/replicated/ updated/adapted, by yourself and others</li>
</ul></li>
<li>High-quality graphics
<ul>
<li>R has a lot of plotting functions to help you produce publication-quality figures</li>
</ul></li>
</ul>
</section>
<section id="getting-set-up" class="slide level2">
<h2>Getting set up</h2>
<ul>
<li>Install R
<ul>
<li><a href="https://cloud.R-project.org/" class="uri">https://cloud.R-project.org/</a></li>
<li>Choose the appropriate version for your operating system and follow the instructions</li>
</ul></li>
<li>Install RStudio
<ul>
<li><a href="https://posit.co/download/rstudio-desktop/" class="uri">https://posit.co/download/rstudio-desktop/</a></li>
<li>ditto</li>
</ul></li>
</ul>
</section>
<section id="getting-to-know-rstudio" class="slide level2">
<h2>Getting to know RStudio</h2>
<div class="absolute" style="">
<p><img data-src="images/rstudio-screenshot.png"></p>
</div>
<div class="fragment">
<div class="absolute" style="border-style:solid; border-width:5px; border-color:red; background: rgba(255, 255, 255, 0.4);top: 155px; left: 0px; width: 609px; height: 161px; ">

</div>
<div class="absolute" style="text-align:center; color:red; font-weight:bold;top: 205px; left: 0px; width: 609px; height: 50px; ">
<p>Source</p>
</div>
</div>
<div class="fragment">
<div class="absolute" style="border-style:solid; border-width:5px; border-color:red; background: rgba(255, 255, 255, 0.4);top: 321px; left: 0px; width: 609px; height: 311px; ">

</div>
<div class="absolute" style="text-align:center; color:red; font-weight:bold;top: 425px; left: 0px; width: 609px; ">
<p>Console</p>
</div>
</div>
<div class="fragment">
<div class="absolute" style="border-style:solid; border-width:5px; border-color:red; background: rgba(255, 255, 255, 0.4);top: 155px; left: 614px; width: 373px; height: 180px; ">

</div>
<div class="absolute" style="text-align:center; color:red; font-weight:bold;top: 190px; left: 614px; width: 373px; ">
<p>Environment/<br>History</p>
</div>
</div>
<div class="fragment">
<div class="absolute" style="border-style:solid; border-width:5px; border-color:red; background: rgba(255, 255, 255, 0.4);top: 340px; left: 614px; width: 373px; height: 292px; ">

</div>
<div class="absolute" style="text-align:center; color:red; font-weight:bold;top: 405px; left: 614px; width: 373px; ">
<p>Files/Plots/<br>Packages/<br>Help/Viewer</p>
</div>
</div>
</section>
<section id="starting-with-r" class="slide level2">
<h2>Starting with R</h2>
<div class="fragment">
<ul>
<li>We can type math in the console, and get an answer:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="dv">3</span><span class="sc">+</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>But to do anything useful, we need to assign the result to a name:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" data-code-line-numbers="|1|2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>x <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">5</span></span>
<span id="cb3-2"><a></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
<p><img data-src="images/environment-pane.png" class="absolute fragment" style="top: 300px; left: 250px; "></p>
</div>
</section>
<section id="starting-with-r-1" class="slide level2">
<h2>Starting with R</h2>
<div class="fragment">
<ul>
<li>Then we can do things with them:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a>y <span class="ot">&lt;-</span> <span class="dv">2</span> <span class="sc">*</span> x</span>
<span id="cb5-2"><a></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
</div>
<p><img data-src="images/environment-pane-2.png" class="absolute fragment" style="top: 115px; left: 250px; "></p>
</div>
<div class="fragment">
<p><br></p>
<ul>
<li>But note that once the value is assigned to y, changing x will not update y:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a>x <span class="ot">&lt;-</span> <span class="dv">25</span></span>
<span id="cb7-2"><a></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
</div>
</div>
</section>
<section id="functions" class="slide level2">
<h2>Functions</h2>
<ul>
<li>Functions allow us to run commands other than simple arithmetic</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="fu">sqrt</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
<ul>
<li>Functions consist of a set of input <em>arguments</em>, code that does something with those inputs, and a return <em>value</em></li>
</ul>
<div class="fragment">
<ul>
<li>To get help on a function, look up the documentation</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a>?sqrt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><img data-src="images/function-documentation.png" class="absolute fragment" style="top: 10px; left: 500px; "></p>
</div>
</section>
<section id="functions-1" class="slide level2">
<h2>Functions</h2>
<ul>
<li>You can (and should!) also write your own functions</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a>times2 <span class="ot">&lt;-</span> <span class="cf">function</span>(a) {</span>
<span id="cb12-2"><a></a>    <span class="fu">return</span>(a <span class="sc">*</span> <span class="dv">2</span>)</span>
<span id="cb12-3"><a></a>}</span>
<span id="cb12-4"><a></a><span class="fu">times2</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 50</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Separating your code out into discrete functions makes it
<ul>
<li>shorter</li>
<li>easier to follow</li>
<li>less error prone</li>
</ul></li>
</ul>
</div>
</section>
<section id="data-types" class="slide level2">
<h2>Data types</h2>
<ul>
<li>So far we have only seen single numeric values</li>
<li>Data in R can take many forms
<ul>
<li>The most basic data structure is the <em>vector</em></li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">6</span>)</span>
<span id="cb14-2"><a></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  7 10  6</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Vectors can also contain characters</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"banana"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"  "banana"</code></pre>
</div>
</div>
<div class="absolute fragment smaller" style="background:#ffffff; border-style:solid; border-width:medium; border-color:red; font-size:0.7em;top: 400px; left: 300px; width: 500px; ">
<p><strong>The quotes are essential:</strong></p>
<p>otherwise R will look for the names ‘apple’ and ‘banana’ (if these names exist, it will use the values they refer to instead of the character strings; if they don’t, it will give an error)</p>
</div>
</div>
</section>
<section id="data-types-1" class="slide level2">
<h2>Data types</h2>
<ul>
<li>The basic data types are <code>numeric</code>, <code>character</code>, <code>logical</code> (<code>TRUE</code> and <code>FALSE</code> values only), and <code>integer</code>
<ul>
<li>Also <code>complex</code> and <code>raw</code>, but we don’t need to worry about those</li>
</ul></li>
<li>In addition to vectors, more complex data structures include:
<ul>
<li>lists: similar to vectors, but the elements can be anything (including other lists), and don’t need to all be the same</li>
<li>matrices and arrays: like vectors, but with multiple dimensions</li>
<li>data frames: more on these later</li>
</ul></li>
</ul>
</section>
<section id="subsetting" class="slide level2">
<h2>Subsetting</h2>
<ul>
<li>We can extract values from within a vector (or other data structure) with square brackets</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">12</span>)</span>
<span id="cb18-2"><a></a>a[<span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12  2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a>a[<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 5</code></pre>
</div>
</div>
<ul>
<li>We can use this in conjunction with a logical operator to do conditional subsetting</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a>a[a <span class="sc">&gt;</span> <span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  5 12</code></pre>
</div>
</div>
</section></section>
<section>
<section id="working-with-data-frames" class="title-slide slide level1 center" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1>Working with Data Frames</h1>

</section>
<section id="data-frames" class="slide level2">
<h2>Data frames</h2>
<ul>
<li>A data frame is a tabular data structure (like a spreadsheet)
<ul>
<li>Each column is a variable</li>
<li>Each row is an observation</li>
</ul></li>
<li>Each column (variable) is a vector, so must contain a single data type
<ul>
<li>But different columns can have different types</li>
</ul></li>
<li>We can read data from Excel or CSV spreadsheets, data files from Stata etc, previously saved R data frames, and much else…</li>
</ul>
</section>
<section id="the-tidyverse" class="slide level2">
<h2>The <code>tidyverse</code></h2>
<ul>
<li>The ‘<code>tidyverse</code>’ is a collection of packages created by the company that makes RStudio</li>
<li>It contains a lot of functions designed to make working with data frames easier
<ul>
<li><code>tibble</code>: a replacement for base data frames</li>
<li><code>readr</code>: read tabular data like csv files (also <code>readxl</code> for Excel files, <code>haven</code> for SPSS/Stata/SAS, and others for different file types)</li>
<li><code>dplyr</code>: data manipulation</li>
<li><code>tidyr</code>: reshaping and tidying data</li>
<li><code>ggplot2</code>: creating plots</li>
<li><code>purrr</code>: functional programming</li>
<li><code>stringr</code>: working with character strings</li>
<li><code>forcats</code>: working with factor variables</li>
</ul></li>
</ul>
</section>
<section id="data-frames-1" class="slide level2">
<h2>Data frames</h2>
<ul>
<li>Reading in a data frame with <code>read_csv()</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb24-2"><a></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"raw_data/gapminder_data.csv"</span>)</span>
<span id="cb24-3"><a></a>gapminder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 6
   country      year      pop continent lifeExp gdpPercap
   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan  1952  8425333 Asia         28.8      779.
 2 Afghanistan  1957  9240934 Asia         30.3      821.
 3 Afghanistan  1962 10267083 Asia         32.0      853.
 4 Afghanistan  1967 11537966 Asia         34.0      836.
 5 Afghanistan  1972 13079460 Asia         36.1      740.
 6 Afghanistan  1977 14880372 Asia         38.4      786.
 7 Afghanistan  1982 12881816 Asia         39.9      978.
 8 Afghanistan  1987 13867957 Asia         40.8      852.
 9 Afghanistan  1992 16317921 Asia         41.7      649.
10 Afghanistan  1997 22227415 Asia         41.8      635.
# ℹ 1,694 more rows</code></pre>
</div>
</div>
</section>
<section id="manipulating-data-frames-with-dplyr" class="slide level2">
<h2>Manipulating data frames with <code>dplyr</code></h2>
<ul>
<li><code>select()</code> only a subset of variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a><span class="fu">select</span>(gapminder, year, country, gdpPercap)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 3
    year country     gdpPercap
   &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1  1952 Afghanistan      779.
 2  1957 Afghanistan      821.
 3  1962 Afghanistan      853.
 4  1967 Afghanistan      836.
 5  1972 Afghanistan      740.
 6  1977 Afghanistan      786.
 7  1982 Afghanistan      978.
 8  1987 Afghanistan      852.
 9  1992 Afghanistan      649.
10  1997 Afghanistan      635.
# ℹ 1,694 more rows</code></pre>
</div>
</div>
</section>
<section id="manipulating-data-frames-with-dplyr-1" class="slide level2">
<h2>Manipulating data frames with <code>dplyr</code></h2>
<ul>
<li><code>filter()</code> only a subset of observations</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a><span class="fu">filter</span>(gapminder, continent <span class="sc">==</span> <span class="st">"Europe"</span>, year <span class="sc">==</span> <span class="dv">2007</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 6
   country                 year      pop continent lifeExp gdpPercap
   &lt;chr&gt;                  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
 1 Albania                 2007  3600523 Europe       76.4     5937.
 2 Austria                 2007  8199783 Europe       79.8    36126.
 3 Belgium                 2007 10392226 Europe       79.4    33693.
 4 Bosnia and Herzegovina  2007  4552198 Europe       74.9     7446.
 5 Bulgaria                2007  7322858 Europe       73.0    10681.
 6 Croatia                 2007  4493312 Europe       75.7    14619.
 7 Czech Republic          2007 10228744 Europe       76.5    22833.
 8 Denmark                 2007  5468120 Europe       78.3    35278.
 9 Finland                 2007  5238460 Europe       79.3    33207.
10 France                  2007 61083916 Europe       80.7    30470.
# ℹ 20 more rows</code></pre>
</div>
</div>
</section>
<section id="manipulating-data-frames-with-dplyr-2" class="slide level2">
<h2>Manipulating data frames with <code>dplyr</code></h2>
<ul>
<li><code>mutate()</code> to create new variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a><span class="fu">mutate</span>(gapminder, <span class="at">gdp_billion =</span> gdpPercap <span class="sc">*</span> pop <span class="sc">/</span> <span class="dv">10</span><span class="sc">^</span><span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 7
   country      year      pop continent lifeExp gdpPercap gdp_billion
   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
 1 Afghanistan  1952  8425333 Asia         28.8      779.        6.57
 2 Afghanistan  1957  9240934 Asia         30.3      821.        7.59
 3 Afghanistan  1962 10267083 Asia         32.0      853.        8.76
 4 Afghanistan  1967 11537966 Asia         34.0      836.        9.65
 5 Afghanistan  1972 13079460 Asia         36.1      740.        9.68
 6 Afghanistan  1977 14880372 Asia         38.4      786.       11.7 
 7 Afghanistan  1982 12881816 Asia         39.9      978.       12.6 
 8 Afghanistan  1987 13867957 Asia         40.8      852.       11.8 
 9 Afghanistan  1992 16317921 Asia         41.7      649.       10.6 
10 Afghanistan  1997 22227415 Asia         41.8      635.       14.1 
# ℹ 1,694 more rows</code></pre>
</div>
</div>
</section>
<section id="manipulating-data-frames-with-dplyr-3" class="slide level2">
<h2>Manipulating data frames with <code>dplyr</code></h2>
<ul>
<li><code>summarise()</code> to calculate summary statistics</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a><span class="fu">summarise</span>(gapminder, <span class="at">mean_gdpPercap =</span> <span class="fu">mean</span>(gdpPercap))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  mean_gdpPercap
           &lt;dbl&gt;
1          7215.</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>This is most useful in conjunction with <code>group_by()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a><span class="fu">summarise</span>(<span class="fu">group_by</span>(gapminder, continent),</span>
<span id="cb34-2"><a></a>                    <span class="at">mean_gdpPercap =</span> <span class="fu">mean</span>(gdpPercap))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  continent mean_gdpPercap
  &lt;chr&gt;              &lt;dbl&gt;
1 Africa             2194.
2 Americas           7136.
3 Asia               7902.
4 Europe            14469.
5 Oceania           18622.</code></pre>
</div>
</div>
</div>
</section>
<section id="manipulating-data-frames-with-dplyr-4" class="slide level2">
<h2>Manipulating data frames with <code>dplyr</code></h2>
<ul>
<li><p>The power of <code>dplyr</code> is in combining several commands using ‘pipes’</p></li>
<li><p>The previous command could be written:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a></a>    <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a></a>    <span class="fu">summarise</span>(<span class="at">mean_gdpPercap =</span> <span class="fu">mean</span>(gdpPercap))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  continent mean_gdpPercap
  &lt;chr&gt;              &lt;dbl&gt;
1 Africa             2194.
2 Americas           7136.
3 Asia               7902.
4 Europe            14469.
5 Oceania           18622.</code></pre>
</div>
</div>
</section>
<section id="reshaping-data-frames" class="slide level2">
<h2>Reshaping data frames</h2>
<ul>
<li>Previously we said that data frames have variables in columns and observations in rows</li>
<li>There may be different ways to interpret this in any given dataset
<ul>
<li>Our dataset has country-by-year as the observation, and population, life expectancy, and GDP per capita as variables</li>
<li>Sometimes it might make sense to have one row per country (observation), and multiple variables representing years</li>
<li>These are known as ‘long’ and ‘wide’ format, respectively</li>
</ul></li>
</ul>
</section>
<section id="reshaping-data-frames-1" class="slide level2">
<h2>Reshaping data frames</h2>
<ul>
<li>The <code>tidyr</code> package helps us transform our data from one shape to the other
<ul>
<li><code>pivot_wider()</code> takes a long dataset and makes it wider</li>
<li><code>pivot_longer()</code> takes a wide dataset and makes it longer</li>
</ul></li>
<li>Recall our original dataset</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a>gapminder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 6
   country      year      pop continent lifeExp gdpPercap
   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan  1952  8425333 Asia         28.8      779.
 2 Afghanistan  1957  9240934 Asia         30.3      821.
 3 Afghanistan  1962 10267083 Asia         32.0      853.
 4 Afghanistan  1967 11537966 Asia         34.0      836.
 5 Afghanistan  1972 13079460 Asia         36.1      740.
 6 Afghanistan  1977 14880372 Asia         38.4      786.
 7 Afghanistan  1982 12881816 Asia         39.9      978.
 8 Afghanistan  1987 13867957 Asia         40.8      852.
 9 Afghanistan  1992 16317921 Asia         41.7      649.
10 Afghanistan  1997 22227415 Asia         41.8      635.
# ℹ 1,694 more rows</code></pre>
</div>
</div>
</section>
<section id="reshaping-data-frames-2" class="slide level2">
<h2>Reshaping data frames</h2>
<ul>
<li>We can reshape this to be wider (one row per country)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a>gapminder_wide <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(country, continent),</span>
<span id="cb40-3"><a></a>              <span class="at">names_from =</span> year, <span class="at">values_from =</span> <span class="fu">c</span>(pop, lifeExp, gdpPercap))</span>
<span id="cb40-4"><a></a>gapminder_wide</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 142 × 38
   country     continent pop_1952 pop_1957 pop_1962 pop_1967 pop_1972 pop_1977
   &lt;chr&gt;       &lt;chr&gt;        &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
 1 Afghanistan Asia       8425333  9240934 10267083 11537966 13079460 14880372
 2 Albania     Europe     1282697  1476505  1728137  1984060  2263554  2509048
 3 Algeria     Africa     9279525 10270856 11000948 12760499 14760787 17152804
 4 Angola      Africa     4232095  4561361  4826015  5247469  5894858  6162675
 5 Argentina   Americas  17876956 19610538 21283783 22934225 24779799 26983828
 6 Australia   Oceania    8691212  9712569 10794968 11872264 13177000 14074100
 7 Austria     Europe     6927772  6965860  7129864  7376998  7544201  7568430
 8 Bahrain     Asia        120447   138655   171863   202182   230800   297410
 9 Bangladesh  Asia      46886859 51365468 56839289 62821884 70759295 80428306
10 Belgium     Europe     8730405  8989111  9218400  9556500  9709100  9821800
# ℹ 132 more rows
# ℹ 30 more variables: pop_1982 &lt;dbl&gt;, pop_1987 &lt;dbl&gt;, pop_1992 &lt;dbl&gt;,
#   pop_1997 &lt;dbl&gt;, pop_2002 &lt;dbl&gt;, pop_2007 &lt;dbl&gt;, lifeExp_1952 &lt;dbl&gt;,
#   lifeExp_1957 &lt;dbl&gt;, lifeExp_1962 &lt;dbl&gt;, lifeExp_1967 &lt;dbl&gt;,
#   lifeExp_1972 &lt;dbl&gt;, lifeExp_1977 &lt;dbl&gt;, lifeExp_1982 &lt;dbl&gt;,
#   lifeExp_1987 &lt;dbl&gt;, lifeExp_1992 &lt;dbl&gt;, lifeExp_1997 &lt;dbl&gt;,
#   lifeExp_2002 &lt;dbl&gt;, lifeExp_2007 &lt;dbl&gt;, gdpPercap_1952 &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="reshaping-data-frames-3" class="slide level2">
<h2>Reshaping data frames</h2>
<ul>
<li>Often raw data will come in a wide format, and we want to reshape it longer for data analysis</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a></a>gapminder_wide <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a></a>  <span class="fu">pivot_longer</span>(pop_1952<span class="sc">:</span>gdpPercap_2007,</span>
<span id="cb42-3"><a></a>               <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">".value"</span>, <span class="st">"year"</span>), <span class="at">names_sep =</span> <span class="st">"_"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,704 × 6
   country     continent year       pop lifeExp gdpPercap
   &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan Asia      1952   8425333    28.8      779.
 2 Afghanistan Asia      1957   9240934    30.3      821.
 3 Afghanistan Asia      1962  10267083    32.0      853.
 4 Afghanistan Asia      1967  11537966    34.0      836.
 5 Afghanistan Asia      1972  13079460    36.1      740.
 6 Afghanistan Asia      1977  14880372    38.4      786.
 7 Afghanistan Asia      1982  12881816    39.9      978.
 8 Afghanistan Asia      1987  13867957    40.8      852.
 9 Afghanistan Asia      1992  16317921    41.7      649.
10 Afghanistan Asia      1997  22227415    41.8      635.
# ℹ 1,694 more rows</code></pre>
</div>
</div>
</section>
<section id="other-tidyverse-packages" class="slide level2">
<h2>Other <code>tidyverse</code> packages</h2>
<ul>
<li>We’ll come back to data visualisation with <code>ggplot2</code> in a later session</li>
<li><code>purrr</code> provides tools for functional programming
<ul>
<li>If we have several similar datasets, or subgroups within our dataset, we don’t want to write out/copy-and-paste our code separately for each one</li>
<li>With <code>purrr</code>, we can use <code>map()</code> (and similar) to apply a function to multiple inputs and extract all of the outputs</li>
</ul></li>
<li><code>stringr</code> and <code>forcats</code> are worth looking at if you need to work with string or factor variables – we won’t cover them here</li>
</ul>
</section>
<section id="resources" class="slide level2">
<h2>Resources</h2>
<ul>
<li>This material was adapted from the Data Carpentries’ ‘R for Social Scientists’ course (<a href="https://preview.carpentries.org/r-socialsci/index.html" class="uri">https://preview.carpentries.org/r-socialsci/index.html</a>)</li>
<li>Hands-On Programming with R (<a href="https://rstudio-education.github.io/hopr" class="uri">https://rstudio-education.github.io/hopr</a>)
<ul>
<li>An introduction to programming in R (for non-programmers!)</li>
</ul></li>
<li>R for Data Science (<a href="https://r4ds.hadley.nz" class="uri">https://r4ds.hadley.nz</a>)
<ul>
<li>An excellent practical introduction to using the tidyverse</li>
</ul></li>
<li>Advanced R (<a href="https://adv-r.hadley.nz" class="uri">https://adv-r.hadley.nz</a>) and R Packages (<a href="https://r-pkgs.org" class="uri">https://r-pkgs.org</a>)
<ul>
<li>More advanced – good next steps once you’re a bit more comfortable using R</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="data-analysis-in-r-regression" class="title-slide slide level1 center" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1>Data analysis in R (regression)</h1>

</section>
<section id="everything-in-r-is-an-object" class="slide level2">
<h2>Everything in R is an object</h2>
<div class="fragment">
<ul>
<li>This includes your fitted regression models</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Workflow:
<ul>
<li>Import/tidy/manipulate raw data</li>
<li>Run regression or other models</li>
<li>Use the created model objects
<ul>
<li>print to console</li>
<li>save to file</li>
<li>extract coefficient estimates</li>
<li>plot results</li>
<li>export to excel/word</li>
<li>etc.</li>
</ul></li>
</ul></li>
</ul>
</div>
</section>
<section id="fitted-model-objects" class="slide level2">
<h2>Fitted model objects</h2>
<ul>
<li><p>R has evolved over time to fit a variety of different needs and use cases</p></li>
<li><p>This gives it great flexibility and ability to meet the needs of different users</p></li>
<li><p>But, the diversity of interfaces, data structures, implementation, and fitted model objects can be a challenge</p>
<ul>
<li>There is often more than one way to fit a given model</li>
<li>What you’ve learned about one model implemented in a given package may not translate well to working with other functions/packages</li>
</ul></li>
<li><p>We’ll cover some tools to help bridge that gap</p></li>
</ul>
</section>
<section id="fitted-model-objects-1" class="slide level2">
<h2>Fitted model objects</h2>
<ul>
<li><p>A few common (but not universal) features:</p></li>
<li><p>Models are described by a <code>formula</code>: e.g.&nbsp;<code>y ~ x + z</code></p></li>
<li><p>Data are provided in a data frame (or, equivalently, tibble)</p></li>
<li><p><code>coef()</code>, <code>vcov()</code>, <code>summary()</code> can be used to extract the coefficient estimates, variance covariance matrix, and to print a summary of the fitted model</p></li>
</ul>
</section>
<section id="the-broom-package" class="slide level2">
<h2>The <code>broom</code> package</h2>
<ul>
<li><p><code>broom</code> provides several functions to convert fitted model objects to tidy tibbles</p></li>
<li><p>Functions:</p>
<ul>
<li><code>tidy()</code>: construct a tibble that summarises the statistical findings (coefficients, p-values, etc.)</li>
<li><code>augment()</code>: add new columns to the original data (predictions/fitted values, etc.)</li>
<li><code>glance()</code>: construct a one-row summary of the model (goodness-of-fit, etc.)</li>
</ul></li>
<li><p>The package works with several model fitting functions from base R and commonly-used packages</p>
<ul>
<li>Some other packages may also implement their own methods to work with these functions</li>
</ul></li>
</ul>
</section>
<section id="first-example-linear-regression" class="slide level2">
<h2>First example – linear regression</h2>
<ul>
<li><p>Linear regression models can be fitted with the <code>lm()</code> function (in the <code>stats</code> package, part of base R)</p></li>
<li><p>We’ll start by loading the gapminder dataset from the previous session:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb44-2"><a></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"raw_data/gapminder_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="first-example-linear-regression-1" class="slide level2">
<h2>First example – linear regression</h2>
<div class="columns">
<div class="column" style="width:75%;">
<ul>
<li>Use <code>?lm</code> to find the documentation</li>
</ul>
<div class="fragment" data-fragment-index="2">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a></a>linear_regression_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(lifeExp <span class="sc">~</span> gdpPercap <span class="sc">+</span> continent, gapminder)</span>
<span id="cb45-2"><a></a>linear_regression_model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lifeExp ~ gdpPercap + continent, data = gapminder)

Coefficients:
      (Intercept)          gdpPercap  continentAmericas  
        4.789e+01          4.453e-04          1.359e+01  
    continentAsia    continentEurope   continentOceania  
        8.658e+00          1.757e+01          1.815e+01  </code></pre>
</div>
</div>
</div>
</div>
</div>
<p><img data-src="images/lm-documentation.png" class="absolute fragment" style="top: 50px; left: 820px; " data-fragment-index="1"></p>
</section>
<section id="first-example-linear-regression-2" class="slide level2">
<h2>First example – linear regression</h2>
<ul>
<li><p><code>linear_regression_model</code> is now a fitted model object</p></li>
<li><p>If we want, we can look at how this object is actually stored:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a></a><span class="fu">str</span>(linear_regression_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 13
 $ coefficients : Named num [1:6] 4.79e+01 4.45e-04 1.36e+01 8.66 1.76e+01 ...
  ..- attr(*, "names")= chr [1:6] "(Intercept)" "gdpPercap" "continentAmericas" "continentAsia" ...
 $ residuals    : Named num [1:1704] -28.1 -26.6 -24.9 -22.9 -20.8 ...
  ..- attr(*, "names")= chr [1:1704] "1" "2" "3" "4" ...
 $ effects      : Named num [1:1704] -2455.1 311.1 100.1 -27.9 -223.1 ...
  ..- attr(*, "names")= chr [1:1704] "(Intercept)" "gdpPercap" "continentAmericas" "continentAsia" ...
 $ rank         : int 6
 $ fitted.values: Named num [1:1704] 56.9 56.9 56.9 56.9 56.9 ...
  ..- attr(*, "names")= chr [1:1704] "1" "2" "3" "4" ...
 $ assign       : int [1:6] 0 1 2 2 2 2
 $ qr           :List of 5
  ..$ qr   : num [1:1704, 1:6] -41.2795 0.0242 0.0242 0.0242 0.0242 ...
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : chr [1:1704] "1" "2" "3" "4" ...
  .. .. ..$ : chr [1:6] "(Intercept)" "gdpPercap" "continentAmericas" "continentAsia" ...
  .. ..- attr(*, "assign")= int [1:6] 0 1 2 2 2 2
  .. ..- attr(*, "contrasts")=List of 1
  .. .. ..$ continent: chr "contr.treatment"
  ..$ qraux: num [1:6] 1.02 1.02 1.01 1.04 1.01 ...
  ..$ pivot: int [1:6] 1 2 3 4 5 6
  ..$ tol  : num 1e-07
  ..$ rank : int 6
  ..- attr(*, "class")= chr "qr"
 $ df.residual  : int 1698
 $ contrasts    :List of 1
  ..$ continent: chr "contr.treatment"
 $ xlevels      :List of 1
  ..$ continent: chr [1:5] "Africa" "Americas" "Asia" "Europe" ...
 $ call         : language lm(formula = lifeExp ~ gdpPercap + continent, data = gapminder)
 $ terms        :Classes 'terms', 'formula'  language lifeExp ~ gdpPercap + continent
  .. ..- attr(*, "variables")= language list(lifeExp, gdpPercap, continent)
  .. ..- attr(*, "factors")= int [1:3, 1:2] 0 1 0 0 0 1
  .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. ..$ : chr [1:3] "lifeExp" "gdpPercap" "continent"
  .. .. .. ..$ : chr [1:2] "gdpPercap" "continent"
  .. ..- attr(*, "term.labels")= chr [1:2] "gdpPercap" "continent"
  .. ..- attr(*, "order")= int [1:2] 1 1
  .. ..- attr(*, "intercept")= int 1
  .. ..- attr(*, "response")= int 1
  .. ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt; 
  .. ..- attr(*, "predvars")= language list(lifeExp, gdpPercap, continent)
  .. ..- attr(*, "dataClasses")= Named chr [1:3] "numeric" "numeric" "character"
  .. .. ..- attr(*, "names")= chr [1:3] "lifeExp" "gdpPercap" "continent"
 $ model        :'data.frame':  1704 obs. of  3 variables:
  ..$ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...
  ..$ gdpPercap: num [1:1704] 779 821 853 836 740 ...
  ..$ continent: chr [1:1704] "Asia" "Asia" "Asia" "Asia" ...
  ..- attr(*, "terms")=Classes 'terms', 'formula'  language lifeExp ~ gdpPercap + continent
  .. .. ..- attr(*, "variables")= language list(lifeExp, gdpPercap, continent)
  .. .. ..- attr(*, "factors")= int [1:3, 1:2] 0 1 0 0 0 1
  .. .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. .. ..$ : chr [1:3] "lifeExp" "gdpPercap" "continent"
  .. .. .. .. ..$ : chr [1:2] "gdpPercap" "continent"
  .. .. ..- attr(*, "term.labels")= chr [1:2] "gdpPercap" "continent"
  .. .. ..- attr(*, "order")= int [1:2] 1 1
  .. .. ..- attr(*, "intercept")= int 1
  .. .. ..- attr(*, "response")= int 1
  .. .. ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt; 
  .. .. ..- attr(*, "predvars")= language list(lifeExp, gdpPercap, continent)
  .. .. ..- attr(*, "dataClasses")= Named chr [1:3] "numeric" "numeric" "character"
  .. .. .. ..- attr(*, "names")= chr [1:3] "lifeExp" "gdpPercap" "continent"
 - attr(*, "class")= chr "lm"</code></pre>
</div>
</div>
</section>
<section id="first-example-linear-regression-3" class="slide level2">
<h2>First example – linear regression</h2>
<ul>
<li>More usefully, we can print a summary of the model</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a></a><span class="fu">summary</span>(linear_regression_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lifeExp ~ gdpPercap + continent, data = gapminder)

Residuals:
    Min      1Q  Median      3Q     Max 
-49.241  -4.479   0.347   5.105  25.138 

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)       4.789e+01  3.398e-01  140.93   &lt;2e-16 ***
gdpPercap         4.453e-04  2.350e-05   18.95   &lt;2e-16 ***
continentAmericas 1.359e+01  6.008e-01   22.62   &lt;2e-16 ***
continentAsia     8.658e+00  5.555e-01   15.59   &lt;2e-16 ***
continentEurope   1.757e+01  6.257e-01   28.08   &lt;2e-16 ***
continentOceania  1.815e+01  1.787e+00   10.15   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 8.39 on 1698 degrees of freedom
Multiple R-squared:  0.5793,    Adjusted R-squared:  0.5781 
F-statistic: 467.7 on 5 and 1698 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="first-example-linear-regression-4" class="slide level2">
<h2>First example – linear regression</h2>
<ul>
<li>If we want to work with the results or combine/compare them with other models, <code>tidy()</code> from the <code>broom</code> package will put them into a nice tidy tibble</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a></a><span class="fu">library</span>(broom)</span>
<span id="cb51-2"><a></a><span class="fu">tidy</span>(linear_regression_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  term               estimate std.error statistic   p.value
  &lt;chr&gt;                 &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)       47.9      0.340         141.  0        
2 gdpPercap          0.000445 0.0000235      18.9 8.55e- 73
3 continentAmericas 13.6      0.601          22.6 2.82e- 99
4 continentAsia      8.66     0.555          15.6 2.72e- 51
5 continentEurope   17.6      0.626          28.1 7.60e-143
6 continentOceania  18.1      1.79           10.2 1.50e- 23</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>And <code>glance()</code> gives us several overall model statistics</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a></a><span class="fu">glance</span>(linear_regression_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squared adj.r.squared sigma statistic   p.value    df logLik    AIC    BIC deviance
      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
1     0.579         0.578  8.39      468. 4.26e-316     5 -6039. 12093. 12131.  119528.
# ℹ 2 more variables: df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="first-example-linear-regression-5" class="slide level2">
<h2>First example – linear regression</h2>
<ul>
<li>The <code>lmtest</code> and <code>car</code> packages provide tools for inference &amp; hypothesis testing</li>
<li>Various clustered and heteroskedasticity-robust standard errors are provided by <code>sandwich</code>
<ul>
<li>These work well together (and with <code>tidy()</code> from <code>broom</code>)</li>
</ul></li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a></a><span class="fu">library</span>(lmtest)</span>
<span id="cb55-2"><a></a><span class="fu">library</span>(sandwich)</span>
<span id="cb55-3"><a></a>linear_regression_model <span class="sc">%&gt;%</span> </span>
<span id="cb55-4"><a></a>  <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcovCL, <span class="at">cluster =</span> <span class="sc">~</span>country) <span class="sc">%&gt;%</span> </span>
<span id="cb55-5"><a></a>    <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  term               estimate std.error statistic  p.value
  &lt;chr&gt;                 &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)       47.9       0.904        53.0  0       
2 gdpPercap          0.000445  0.000159      2.81 5.05e- 3
3 continentAmericas 13.6       1.56          8.69 8.32e-18
4 continentAsia      8.66      1.55          5.57 2.98e- 8
5 continentEurope   17.6       2.18          8.06 1.44e-15
6 continentOceania  18.1       2.77          6.55 7.36e-11</code></pre>
</div>
</div>
</div>
</section>
<section id="generalised-linear-regression" class="slide level2">
<h2>Generalised linear regression</h2>
<ul>
<li>Can be fitted with the <code>glm()</code> function<br>
(also in the <code>stats</code> package)</li>
</ul>
<div class="fragment" data-fragment-index="1">
<ul>
<li><code>?glm</code></li>
</ul>
</div>
<div class="fragment" data-fragment-index="2">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a></a>gen_linear_regression_model <span class="ot">&lt;-</span> <span class="fu">glm</span>(lifeExp <span class="sc">~</span> gdpPercap <span class="sc">+</span> continent,</span>
<span id="cb57-2"><a></a>                                   <span class="at">family =</span> <span class="st">"quasipoisson"</span>, gapminder)</span>
<span id="cb57-3"><a></a>gen_linear_regression_model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:  glm(formula = lifeExp ~ gdpPercap + continent, family = "quasipoisson", 
    data = gapminder)

Coefficients:
      (Intercept)          gdpPercap  continentAmericas  
        3.875e+00          6.156e-06          2.490e-01  
    continentAsia    continentEurope   continentOceania  
        1.671e-01          3.092e-01          3.177e-01  

Degrees of Freedom: 1703 Total (i.e. Null);  1698 Residual
Null Deviance:      4946 
Residual Deviance: 2229     AIC: NA</code></pre>
</div>
</div>
</div>
<p><img data-src="images/glm-documentation.png" class="absolute fragment" style="top: 50px; left: 820px; " data-fragment-index="1"></p>
</section>
<section id="generalised-linear-regression-1" class="slide level2">
<h2>Generalised linear regression</h2>
<ul>
<li>Again, we can print a summary of the model</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a></a><span class="fu">summary</span>(gen_linear_regression_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = lifeExp ~ gdpPercap + continent, family = "quasipoisson", 
    data = gapminder)

Coefficients:
                   Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)       3.875e+00  6.524e-03  594.03   &lt;2e-16 ***
gdpPercap         6.156e-06  3.475e-07   17.72   &lt;2e-16 ***
continentAmericas 2.490e-01  1.054e-02   23.62   &lt;2e-16 ***
continentAsia     1.671e-01  1.009e-02   16.55   &lt;2e-16 ***
continentEurope   3.092e-01  1.054e-02   29.33   &lt;2e-16 ***
continentOceania  3.177e-01  2.815e-02   11.29   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for quasipoisson family taken to be 1.279258)

    Null deviance: 4945.6  on 1703  degrees of freedom
Residual deviance: 2229.4  on 1698  degrees of freedom
AIC: NA

Number of Fisher Scoring iterations: 4</code></pre>
</div>
</div>
</section>
<section id="generalised-linear-regression-2" class="slide level2">
<h2>Generalised linear regression</h2>
<ul>
<li>And use <code>tidy()</code> and <code>glance()</code> from the <code>broom</code> package to produce nice tidy tibbles</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a></a><span class="fu">tidy</span>(gen_linear_regression_model, <span class="at">conf.int =</span> <span class="cn">TRUE</span>, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
  term              estimate   std.error statistic   p.value conf.low conf.high
  &lt;chr&gt;                &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)          48.2  0.00652         594.  0            47.6      48.8 
2 gdpPercap             1.00 0.000000347      17.7 1.42e- 64     1.00      1.00
3 continentAmericas     1.28 0.0105           23.6 6.86e-107     1.26      1.31
4 continentAsia         1.18 0.0101           16.6 3.57e- 57     1.16      1.21
5 continentEurope       1.36 0.0105           29.3 2.32e-153     1.33      1.39
6 continentOceania      1.37 0.0282           11.3 1.57e- 28     1.30      1.45</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a></a><span class="fu">glance</span>(gen_linear_regression_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 8
  null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs
          &lt;dbl&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;int&gt; &lt;int&gt;
1         4946.    1703     NA    NA    NA    2229.        1698  1704</code></pre>
</div>
</div>
</div>
</section>
<section id="what-else" class="slide level2">
<h2>What else?</h2>
<ul>
<li><p>There are many (<strong>many!</strong>) other packages that estimate different regression models or provide tools for diagnostic testing, post-hoc analysis, or visualisation of regression models</p></li>
<li><p>For example, the <a href="https://cran.r-project.org/web/views/Econometrics.html" data-preview-link="true">Econometrics Task View</a> on cran.r-project.org</p></li>
</ul>
<div class="fragment">
<ul>
<li>Some that might be of particular relevance to (some of) you:
<ul>
<li><a href="https://cran.r-project.org/web/packages/mediation/index.html"><code>mediation</code></a>: parametric and non-parametric mediation analysis</li>
<li><a href="https://cran.r-project.org/web/packages/eRm/index.html"><code>eRm</code></a> and <a href="https://cran.r-project.org/web/packages/ltm/index.html"><code>ltm</code></a>: Rasch models</li>
<li><a href="https://cran.r-project.org/web/packages/metafor/index.html"><code>metafor</code></a>: meta-analysis</li>
<li><a href="https://cran.r-project.org/web/packages/rstan/index.html"><code>rstan</code></a>, <a href="https://cran.r-project.org/web/packages/rstanarm/index.html"><code>rstanarm</code></a>, and <a href="https://cran.r-project.org/web/packages/brms/index.html"><code>brms</code></a>: Bayesian analysis (using <a href="http://mc-stan.org/">Stan</a>)</li>
<li><a href="https://cran.r-project.org/web/packages/plm/index.html"><code>plm</code></a>, <a href="https://cran.r-project.org/web/packages/fixest/index.html"><code>fixest</code></a>, <a href="https://cran.r-project.org/web/packages/lme4/index.html"><code>lme4</code></a>, and <a href="https://cran.r-project.org/web/packages/nlme/index.html"><code>nlme</code></a>: panel and multi-level/mixed effect models</li>
</ul></li>
</ul>
</div>
</section></section>
<section>
<section id="data-visualisation" class="title-slide slide level1 center" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1>Data visualisation</h1>

</section>
<section id="data-visualisation-with-ggplot2" class="slide level2">
<h2>Data visualisation with <code>ggplot2</code></h2>
<ul>
<li>There are a lot of tools available to create plots in R
<ul>
<li><code>ggplot2</code> is the most well-developed and widely used</li>
</ul></li>
<li>We generally want data in long format for plotting
<ul>
<li>One column for each variable</li>
<li>One row for each observation</li>
</ul></li>
<li>We’ll use the <code>gapminder</code> dataset from the previous session</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb65-2"><a></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"raw_data/gapminder_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-grammar-of-graphics" class="slide level2">
<h2>The grammar of graphics</h2>
<ul>
<li>dataset – self-explanatory</li>
<li>geom – the geometric object used to represent the data</li>
<li>mappings – which features of the geom represent which variables in the data</li>
<li>stats – transformations of the data before plotting</li>
<li>position – to avoid overplotting data points</li>
<li>coordinate system – how the x and y axes are plotted</li>
<li>faceting scheme – split the plot by subgroups</li>
</ul>
</section>
<section id="data-visualisation-with-ggplot2-1" class="slide level2 smaller">
<h2>Data visualisation with <code>ggplot2</code></h2>
<ul>
<li>That’s the theory</li>
<li>In practice, the easiest way is to build the plot up step-by-step (trial-and-error)
<ul>
<li>start with the basic <code>ggplot</code> object</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a></a><span class="fu">ggplot</span>(<span class="at">data =</span> gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="fragment" data-fragment-index="1">
<p><img data-src="images/ggplot-blank.png" class="absolute fragment fade-out" style="top: 100px; left: 200px; width: 550px; height: 550px; " data-fragment-index="2"></p>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li>you can specify (some of) the mappings at this stage</li>
</ul>
<div class="sourceCode" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a></a><span class="fu">ggplot</span>(<span class="at">data =</span> gapminder, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment fade-in" data-fragment-index="3">
<p><img data-src="images/ggplot-axes.png" class="absolute fragment fade-out" style="top: 100px; left: 200px; width: 550px; height: 550px; "></p>
</div>
</section></section>
<section>
<section id="data-analysis-workflows-and-project-organisation" class="title-slide slide level1 center" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1>Data analysis workflows and project organisation</h1>

</section>
<section id="reproducible-research" class="slide level2">
<h2>Reproducible research</h2>
<ul>
<li>What is ‘reproducibility’?
<ul>
<li>Focus here is on <em>computational reproducibility</em> – can your results be replicated by someone (or yourself!) with access to your data, code, etc.</li>
</ul></li>
<li>Why might research not be reproducible?
<ul>
<li>Raw data are not available or have been changed</li>
<li>Intermediate steps taken to extract, clean, reshape, merge, or analyse data are not adequately recorded or described</li>
<li>Software tools have changed or are no longer available since the analysis was conducted</li>
<li>Errors in manually transcribing results from analysis software to final report (manuscript, etc.)</li>
</ul></li>
</ul>
</section>
<section id="reproducible-research-1" class="slide level2 smaller">
<h2>Reproducible research</h2>
<p><br></p>
<blockquote>
<p>Computers are now essential in all branches of science, but most researchers are never taught the equivalent of basic lab skills for research computing. As a result, data can get lost, analyses can take much longer than necessary, and researchers are limited in how effectively they can work with software and data. Computing workflows need to follow the same practices as lab projects and notebooks, with organized data, documented steps, and the project structured for reproducibility, but researchers new to computing often don’t know where to start.</p>
</blockquote>
<p>— Wilson G, Bryan J, Cranston K, et al.&nbsp;<em>Good enough practices in scientific computing</em>. PLoS Comput Biol 2017;13:e1005510</p>
</section>
<section id="reproducible-research-2" class="slide level2">
<h2>Reproducible research</h2>
<ul>
<li>Ensuring reproducibility (for others) can also have great benefits for you as the analyst/author
<ul>
<li>When you come back to an analysis later, you know exactly what you did, why you did it, and how to replicate it if needed</li>
<li>If data changes, errors are identified, or new analyses need to be conducted, your analysis and results can easily be updated</li>
<li>The code and methods used in one project/analysis can be re-used in other work</li>
<li>Keeping to a simple, standardised workflow for all projects allows you to switch easily &amp; quickly between projects
<ul>
<li>And prevents you having to make a whole bunch of new decisions every time you start something new</li>
</ul></li>
</ul></li>
</ul>
</section>
<section class="slide level2">


<img data-src="images/interconnected-tasks.png" class="r-stretch"></section>
<section id="key-principles" class="slide level2">
<h2>Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-raw-data" class="slide level2">
<h2>Key principles – Raw data</h2>
<ul>
<li>Raw data stays raw
<ul>
<li>Make raw data files read-only</li>
</ul></li>
</ul>
</section>
<section id="key-principles-raw-data-1" class="slide level2">
<h2>Key principles – Raw data</h2>

<img data-src="images/read-only.png" class="r-stretch"></section>
<section id="key-principles-raw-data-2" class="slide level2">
<h2>Key principles – Raw data</h2>
<ul>
<li>Raw data stays raw
<ul>
<li>Make raw data files read-only</li>
<li>Can be relaxed (temporarily) if needed, but avoids accidental changes</li>
<li>Most (probably all) changes to data should be scripted (in R, Stata, etc.) rather than made directly in raw data files</li>
</ul></li>
</ul>
</section>
<section id="key-principles-1" class="slide level2">
<h2>Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-2" class="slide level2">
<h2>Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li><span style="color:Red;">Source is real</span></li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-source-files" class="slide level2">
<h2>Key principles – Source files</h2>
<ul>
<li>Source is real…
<ul>
<li>…workspace is replaceable</li>
</ul></li>
<li>Any individual R session is disposable and can be replaced/recreated at any time, if you have raw data and appropriate source code</li>
<li>Thinking in this way forces you to follow good reproducibility practices in your analysis workflow</li>
</ul>
</section>
<section id="key-principles-source-files-1" class="slide level2">
<h2>Key principles – Source files</h2>
<ul>
<li>What does ‘Source is real’ mean?
<ul>
<li>Data import, cleaning, reshaping, wrangling, and analysis should all be conducted via script files
<ul>
<li>or at least documented in thorough, step-by-step detail</li>
</ul></li>
<li>All source code should be saved (regularly!) so all of these steps can be reproduced at any time</li>
<li>Important (or time-consuming) intermediate objects (cleaned datasets, figures, etc) should be explicitly saved, individually, to files (by script, not the mouse, if possible)</li>
</ul></li>
</ul>
</section>
<section id="key-principles-source-files-2" class="slide level2">
<h2>Key principles – Source files</h2>
<ul>
<li>Start R with a blank slate, and restart often</li>
</ul>
</section>
<section id="key-principles-source-files-3" class="slide level2">
<h2>Key principles – Source files</h2>

<img data-src="images/save-workspace.PNG" class="r-stretch"><div class="absolute" style="border-style:solid; border-width:5px; border-color:red;top: 330px; left: 130px; width: 260px; height: 72px; ">

</div>
</section>
<section id="key-principles-source-files-4" class="slide level2">
<h2>Key principles – Source files</h2>
<ul>
<li>Start R with a blank slate, and restart often
<ul>
<li>When you are running code interactively to try things out, you will be adding objects to the workspace, loading packages, etc</li>
<li>If you inadvertently rely on these objects, packages, etc in your source files, you may not be able to reproduce your results in a new session later</li>
<li>If you have saved source code and intermediate objects to file as you go, it is quick and easy to restart R (Ctrl+Shift+F10, in RStudio) regularly to check whether everything still works as expected
<ul>
<li>It is much better to find this out after a few minutes than after a whole day’s work!</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="key-principles-3" class="slide level2">
<h2>Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-4" class="slide level2">
<h2>Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li><span style="color:Red;">Design for collaboration</span>
<ul>
<li><span style="color:Red;">(including with your future self)</span></li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-design-for-collaboration" class="slide level2">
<h2>Key principles – Design for collaboration</h2>
<div class="fragment">
<ul>
<li>An analysis directory like this makes it very difficult for anyone (including yourself later) to follow the steps required to reproduce your results</li>
</ul>
</div>
</section>
<section class="slide level2">


<img data-src="images/bad_layout.png" class="r-stretch"></section>
<section id="key-principles-design-for-collaboration-1" class="slide level2">
<h2>Key principles – Design for collaboration</h2>
<div class="columns">
<div class="column">
<ul>
<li>Much better to follow a logical structure (and the same across all of your projects)
<ul>
<li>Set out high-level structure, e.g.
<ol type="1">
<li>read raw data</li>
<li>tidy data for analysis</li>
<li>run analyses on tidy data</li>
<li>collate report/results of analyses</li>
</ol></li>
<li>Put raw data in its own directory (and read-only)</li>
<li>Consider other structures/subfolders as appropriate for your project</li>
</ul></li>
</ul>
</div><div class="column">
<p><img data-src="images/better-layout.png"></p>
</div>
</div>
</section>
<section id="key-principles-design-for-collaboration-2" class="slide level2">
<h2>Key principles – Design for collaboration</h2>
<ul>
<li>Break up complicated or repeated analysis steps into discrete functions</li>
<li>Give functions and variables meaningful names</li>
<li>Use comments liberally</li>
</ul>
<p><img data-src="images/functions.png" class="fragment absolute" style="top: 200px; left: 450px; "></p>
</section>
<section id="key-principles-5" class="slide level2">
<h2>Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-6" class="slide level2">
<h2>Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li><span style="color:Red;">Consider version control</span></li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-version-control" class="slide level2">
<h2>Key principles – Version control</h2>
<ul>
<li><p>Keeping track of changes to data and code (and being able to revert to a previous version if things go wrong) is critical for reproducible research</p></li>
<li><p>This is particularly true when collaborating with others</p></li>
<li><p>The best way to do this is with a version control system such as Git</p></li>
</ul>
</section>
<section id="key-principles-version-control-1" class="slide level2">
<h2>Key principles – Version control</h2>
<ul>
<li>We won’t go into this in detail today, but a quick Getting Started guide:
<ul>
<li>Register a GitHub account (<a href="https://github.com" class="uri">https://github.com</a>)</li>
<li>Install Git (<a href="https://git-scm.com" class="uri">https://git-scm.com</a>) and complete basic setup</li>
<li>Get a Git client (GUI)
<ul>
<li>GitKraken is a good choice (<a href="https://gitkraken.com" class="uri">https://gitkraken.com</a>)</li>
<li>GitHub offers a free client, GitHub Desktop (<a href="https://desktop.github.com/" class="uri">https://desktop.github.com/</a>)</li>
<li>RStudio has a basic Git client built-in, which is fine for much day-to-day use</li>
</ul></li>
</ul></li>
<li>See <a href="https://happygitwithr.com/" class="uri">https://happygitwithr.com/</a> for more detailed instructions</li>
</ul>
</section>
<section id="key-principles-version-control-2" class="slide level2">
<h2>Key principles – Version control</h2>
<ul>
<li>Using Git (&amp; GitHub) in your projects
<ul>
<li>A couple of ways to get this set up. Probably the easiest is:</li>
<li>Create a project repository (repo) on GitHub</li>
<li>Import (‘clone’) the repo as a new RStudio project</li>
<li>Make changes as usual in RStudio (or any other program)</li>
<li>‘Commit’ (take a snapshot of the current state of the project) often to your local repo</li>
<li>Less often (maybe once/day) ‘push’ (sync) the local repo to GitHub</li>
</ul></li>
<li>What to put under version control
<ul>
<li>Source code</li>
<li>Raw data (unless its very large)</li>
</ul></li>
</ul>
<div class="absolute fragment" style="background:#ffffff; border-style:solid; border-width:medium; border-color:red; font-size:0.9em; margin-left:20px; line-height:0.9;top: 480px; left: 500px; width: 500px; ">
<p>What <strong>not</strong> to put under version control</p>
<ul>
<li>Most intermediate objects</li>
<li>Miscellaneous supporting documents (pdf files, etc.)</li>
<li>Final output in the form of word documents, etc.</li>
</ul>
</div>
</section>
<section id="key-principles-7" class="slide level2">
<h2>Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li>Automation?</li>
</ul>
</section>
<section id="key-principles-8" class="slide level2">
<h2>Key principles</h2>
<ul>
<li>Raw data stays raw</li>
<li>Source is real</li>
<li>Design for collaboration
<ul>
<li>(including with your future self)</li>
</ul></li>
<li>Consider version control</li>
<li><span style="color:Red;">Automation?</span></li>
</ul>
</section>
<section id="key-principles-automation" class="slide level2">
<h2>Key principles – Automation</h2>
<ul>
<li>Just as we treat source code as the ‘true’, reproducible record of each step of the analysis, we can record (and automate) how the sequence of individual steps fits together to produce our final results</li>
</ul>
<div class="fragment" data-fragment-index="1">
<div class="fragment fade-out" data-fragment-index="2">
<p><img data-src="images/workflow.png" class="absolute" style="top: 100px; left: 333px; "></p>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li><p>Can be as simple as something like:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a></a><span class="fu">source</span>(<span class="st">"code/00-download-data.R"</span>)</span>
<span id="cb68-2"><a></a><span class="fu">source</span>(<span class="st">"code/01-tabulate-frequencies.R"</span>)</span>
<span id="cb68-3"><a></a><span class="fu">source</span>(<span class="st">"code/02-create-histogram.R"</span>)</span>
<span id="cb68-4"><a></a><span class="fu">source</span>(<span class="st">"code/03-render-report.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Shows in what order to run the scripts, and allows us to resume from the middle (if, for example, you have only changed the file <code>02-create-histogram.R</code>, there is no need to redo the first two steps, but we do need to rerun the <code>create-histogram</code> and <code>render-report</code> steps</p>
<ul>
<li>Each script should load the required inputs and save the resulting output to file</li>
</ul></li>
</ul>
</div>
</section>
<section id="key-principles-automation-1" class="slide level2">
<h2>Key principles – Automation</h2>
<ul>
<li><p>For more complicated (or long-running) analyses, we may want to explicitly specify dependencies and let the computer figure out how to get everything up-to-date</p></li>
<li><p>Two good tools for doing this:</p>
<ul>
<li>make</li>
<li>targets</li>
</ul></li>
<li><p>Advantages of an automated pipeline like this:</p>
<ul>
<li>When you modify one stage of the pipeline, you can re-run your analyses to get up-to-date final results, with a single click/command</li>
<li>Only the things that need to be updated will be re-run, saving time (important if some of your analyses take a long time to run)</li>
</ul></li>
</ul>
</section>
<section id="key-principles-automation-2" class="slide level2">
<h2>Key principles – Automation</h2>
<ul>
<li><p>Make is a system tool, designed for use in software development, to specify targets, commands, and dependencies between files and selectively re-run commands when dependencies change</p></li>
<li><p>A Makefile is a plain text file specifying a list of these targets (intermediate/output files in the analysis workflow), commands (to create the targets), and dependencies (input files needed for each command)</p></li>
</ul>
<div class="sourceCode" id="cb69"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb69-1"><a></a><span class="ex">words.txt:</span> /usr/share/dict/words</span>
<span id="cb69-2"><a></a>    <span class="fu">cp</span> /usr/share/dict/words words.txt</span>
<span id="cb69-3"><a></a></span>
<span id="cb69-4"><a></a><span class="ex">histogram.tsv:</span> histogram.r words.txt</span>
<span id="cb69-5"><a></a>    <span class="ex">Rscript</span> $<span class="op">&lt;</span></span>
<span id="cb69-6"><a></a></span>
<span id="cb69-7"><a></a><span class="ex">histogram.png:</span> histogram.tsv</span>
<span id="cb69-8"><a></a>    <span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">'library(ggplot2); qplot(Length, Freq, data=read.delim("$&lt;")); ggsave("$@")'</span></span>
<span id="cb69-9"><a></a></span>
<span id="cb69-10"><a></a><span class="ex">report.html:</span> report.rmd histogram.tsv histogram.png</span>
<span id="cb69-11"><a></a>    <span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">'rmarkdown::render("$&lt;")'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="key-principles-automation-3" class="slide level2">
<h2>Key principles – Automation</h2>
<ul>
<li><code>targets</code> is an R package designed to do something very similar, but specifically designed for R projects</li>
</ul>
<div class="sourceCode" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a></a>plan <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb70-2"><a></a>  <span class="fu">tar_file</span>(words, <span class="fu">download_words</span>()),</span>
<span id="cb70-3"><a></a>  <span class="fu">tar_target</span>(frequency_table, <span class="fu">summarise_word_lengths</span>(words)),</span>
<span id="cb70-4"><a></a>  <span class="fu">tar_target</span>(histogram, <span class="fu">create_histogram</span>(frequency_table)),</span>
<span id="cb70-5"><a></a>  <span class="fu">tar_file</span>(report, <span class="fu">render_report</span>(<span class="st">"reports/report.rmd"</span>, frequency_table, histogram))</span>
<span id="cb70-6"><a></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Abstract workflow steps behind function calls (with meaningful names) as much as possible
<ul>
<li>The plan should be a clear, high-level overview of the analysis steps required</li>
</ul></li>
</ul>
</section>
<section id="summary" class="slide level2">
<h2>Summary</h2>
<ul>
<li>Treat raw data as read-only</li>
<li>Save source, not the workspace</li>
<li>Design for collaboration
<ul>
<li>Follow a logical project structure</li>
<li>Simplify code with human-readable abstractions (functions etc)</li>
</ul></li>
<li>Consider version control</li>
<li>Consider automating your analyses</li>
</ul>
</section>
<section class="slide level2">


<img data-src="images/owl.jpg" class="r-stretch"></section>
<section id="summary-1" class="slide level2">
<h2>Summary</h2>
<ul>
<li>Treat raw data as read-only <img data-src="images/tick.jpg" class="fragment" style="height:1em" data-fragment-index="1"></li>
<li>Save source, not the workspace <img data-src="images/tick.jpg" class="fragment" style="height:1em" data-fragment-index="3"></li>
<li>Design for collaboration
<ul>
<li>Follow a logical project structure <img data-src="images/tick.jpg" class="fragment" style="height:1em" data-fragment-index="2"></li>
<li>Simplify code with human-readable abstractions (functions etc) <img data-src="images/tick.jpg" class="fragment" style="height:1em" data-fragment-index="4"></li>
</ul></li>
<li>Consider version control</li>
<li>Consider automating your analyses</li>
</ul>
<div class="absolute fragment" data-fragment-index="3" style="color:#0070c0; font-size:0.6em; line-height:0.6em;top: 120px; left: 540px; ">
<p>(if you are already writing<br>script files for your analyses)</p>
</div>
<div class="absolute fragment" data-fragment-index="4" style="color:#0070c0; font-size:0.6em; line-height:0.6em;top: 325px; left: 800px; ">
<p>(will get better<br>with practice)</p>
</div>
<div class="absolute fragment" data-fragment-index="5" style="color:#0070c0; font-size:0.8em; line-height:0.8em;top: 445px; left: 70px; ">
<p>(start with a simple high-level overview of the steps in the analysis,<br>even if you don’t want to do a full automated pipeline)</p>
</div>
</section>
<section id="resources-1" class="slide level2 smaller">
<h2>Resources</h2>
<ul>
<li>Wilson G, Aruliah DA, Brown CT, Chue Hong NP, Davis M, et al.&nbsp;(2014) Best Practices for Scientific Computing. PLoS Biol 12(1):e1001745. <a href="https://doi.org/10.1371/journal.pbio.1001745" class="uri">https://doi.org/10.1371/journal.pbio.1001745</a></li>
<li>Wilson G, Bryan J, Cranston K, Kitzes J, Nederbragt L, Teal TK (2017) Good enough practices in scientific computing. PloS Comput Biol 13(6):e1005510. <a href="https://doi.org/10.1371/journal.pcbi.1005510" class="uri">https://doi.org/10.1371/journal.pcbi.1005510</a></li>
<li>Bryan J, Hester J. What they forgot to teach you about R. <a href="https://rstats.wtf" class="uri">https://rstats.wtf</a> (especially Section I: A holistic workflow)</li>
<li>Bryan J. STAT545 (based on the UBC course of the same name). <a href="https://stat545.com" class="uri">https://stat545.com</a></li>
<li>Bryan J. Happy Git and GitHub for the useR. <a href="https://happygitwithr.com" class="uri">https://happygitwithr.com</a></li>
<li>For targets:
<ul>
<li>McBain M. Benefits of a function-based diet (The {drake} post). <a href="https://milesmcbain.xyz/the-drake-post/" class="uri">https://milesmcbain.xyz/the-drake-post/</a>
<ul>
<li>Refers to the <code>drake</code> package, which was a predecessor package of <code>targets</code>. The same concepts all apply</li>
</ul></li>
<li>Landau W. The {targets} R package user manual. <a href="https://books.ropensci.org/targets/" class="uri">https://books.ropensci.org/targets/</a></li>
</ul></li>
</ul>
</section></section>
<section>
<section id="writing-reports-in-r" class="title-slide slide level1 center" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1>Writing reports in R</h1>

</section>
<section id="data-workflow" class="slide level2">
<h2>Data workflow</h2>
<p><img data-src="images/linear-workflow.png" class="absolute" style="top: 180px; width: 1500px; height: 400px; "></p>
<p><img data-src="images/workflow-arrows.png" class="absolute fragment" style="top: 55px; "></p>
<div class="absolute fragment" style="background:#F2F2F233;top: 100px; left: 500px; width: 850px; ">
<div class="sourceCode" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a></a>plan <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb71-2"><a></a>  <span class="fu">tar_file</span>(words, <span class="fu">download_words</span>()),</span>
<span id="cb71-3"><a></a>  <span class="fu">tar_target</span>(frequency_table, <span class="fu">summarise_word_lengths</span>(words)),</span>
<span id="cb71-4"><a></a>  <span class="fu">tar_target</span>(histogram, <span class="fu">create_histogram</span>(frequency_table)),</span>
<span id="cb71-5"><a></a>  <span class="fu">tar_file</span>(report, <span class="fu">render_report</span>(<span class="st">"reports/report.rmd"</span>, frequency_table, histogram))</span>
<span id="cb71-6"><a></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="absolute fragment" style="background:#FFC20FCC; font-size:0.8em;top: 400px; left: -100px; width: 500px; ">
<p>Advantages:</p>
<ul>
<li>Reported results are always kept up-to-date with data and analysis</li>
<li>Changes at any point along the workflow can be made easily and robustly</li>
</ul>
</div>
</section>
<section class="slide level2">

<iframe data-external="1" src="https://www.youtube.com/embed/s3JldKoA0zw" width="100%" height="100%" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</section>
<section id="data-workflow-1" class="slide level2">
<h2>Data workflow</h2>
<p><img data-src="images/linear-workflow.png" class="absolute" style="top: 180px; width: 1500px; height: 400px; "></p>
<p><img data-src="images/workflow-arrows.png" class="absolute" style="top: 55px; "></p>
<div class="absolute" style="background:#F2F2F233;top: 100px; left: 500px; width: 850px; ">
<div class="sourceCode" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a></a>plan <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb72-2"><a></a>  <span class="fu">tar_file</span>(words, <span class="fu">download_words</span>()),</span>
<span id="cb72-3"><a></a>  <span class="fu">tar_target</span>(frequency_table, <span class="fu">summarise_word_lengths</span>(words)),</span>
<span id="cb72-4"><a></a>  <span class="fu">tar_target</span>(histogram, <span class="fu">create_histogram</span>(frequency_table)),</span>
<span id="cb72-5"><a></a>  <span class="fu">tar_file</span>(report, <span class="fu">render_report</span>(<span class="st">"reports/report.rmd"</span>, frequency_table, histogram))</span>
<span id="cb72-6"><a></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="absolute" style="background:#FFC20FCC; font-size:0.8em;top: 400px; left: -100px; width: 500px; ">
<p>Advantages:</p>
<ul>
<li>Reported results are always kept up-to-date with data and analysis</li>
<li>Changes at any point along the workflow can be made easily and robustly</li>
</ul>
</div>
</section>
<section id="r-markdown" class="slide level2">
<h2>R Markdown</h2>
<iframe data-external="1" src="https://player.vimeo.com/video/178485416?embedded=true&amp;source=video_title&amp;owner=22717988" width="100%" height="85%" frameborder="0" title="" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen=""></iframe>
</section>
<section id="quarto" class="slide level2">
<h2>Quarto</h2>
<ul>
<li>We’ll focus on Quarto instead</li>
<li>Quarto is a relatively new tool very similar to RMarkdown
<ul>
<li>Most of what you might read about RMarkdown also applies to Quarto</li>
<li>see also <a href="https://quarto.org" class="uri">https://quarto.org</a> for documentation and guides</li>
</ul></li>
</ul>
</section>
<section class="slide level2">

</section></section>
<section id="version-control" class="title-slide slide level1 center" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1>Version control</h1>

</section>

<section id="automation" class="title-slide slide level1 center" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1>Automation</h1>

</section>

<section id="programming-in-r" class="title-slide slide level1 center" data-background-image="images/otago-pennant.png, images/cmor-banner.png, images/title-background.png" data-background-size="7%, 25%, 100%" data-background-repeat="no-repeat" data-background-position="3% 1%, bottom 1% left 50px,0 0" style="text-align:right;">
<h1>Programming in R</h1>

<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p><a href="../index.html">Return to CMOR Lunch’n’Learn presentations</a></p>
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.2,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>